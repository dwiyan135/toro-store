module.exports=[17606,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(20094),f=a.i(5050);let g=(0,f.createServerReference)("00bf5bb6ae0836908cd09bca8b09567e320355edfe",f.callServer,void 0,f.findSourceMapURL,"getAdminPackages"),h=(0,f.createServerReference)("40c36cea8ee0ea340a719713fe6416e15ae2c9f16b",f.callServer,void 0,f.findSourceMapURL,"deletePackage");var i=a.i(53291);let j=(0,f.createServerReference)("400606749c04c88e038e57aabb785454ba0370a5e6",f.callServer,void 0,f.findSourceMapURL,"bulkDeletePackages"),k=(0,f.createServerReference)("607c92be919f7a7a0f4c88af65e19c471f3103379d",f.callServer,void 0,f.findSourceMapURL,"bulkUpdatePackages"),l=["Semua","Basic","Premium","Special","Event","Limited"],m=[6,12,24];function n(){let[a,f]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)("Semua"),[v,w]=(0,c.useState)("all"),[x,y]=(0,c.useState)("sortOrder"),[z,A]=(0,c.useState)(12),[B,C]=(0,c.useState)(1),[D,E]=(0,c.useState)(new Set),F=(0,c.useCallback)(async()=>{o(!0),f(await g()),o(!1)},[]);(0,c.useEffect)(()=>{F()},[F]),(0,c.useEffect)(()=>{C(1),E(new Set)},[r,t,v,x,z]);let G=(0,c.useMemo)(()=>{let b=[...a];if(r.trim()){let a=r.toLowerCase();b=b.filter(b=>b.name.toLowerCase().includes(a)||b.category.toLowerCase().includes(a))}return"Semua"!==t&&(b=b.filter(a=>a.category===t)),"active"===v&&(b=b.filter(a=>a.isActive)),"inactive"===v&&(b=b.filter(a=>!a.isActive)),b.sort((a,b)=>{switch(x){case"name":return a.name.localeCompare(b.name);case"price":return a.price.localeCompare(b.price);case"stock":return b.stock-a.stock;case"orders":return b._count.orders-a._count.orders;case"newest":return new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime();default:return a.sortOrder-b.sortOrder}}),b},[a,r,t,v,x]),H=Math.max(1,Math.ceil(G.length/z)),I=G.slice((B-1)*z,B*z),J=I.map(a=>a.id),K=J.length>0&&J.every(a=>D.has(a)),L=J.some(a=>D.has(a)),M=a=>{E(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},N=async a=>{q(a.id);let b=await (0,i.updatePackage)(a.id,{isActive:!a.isActive});b.success?(e.toast.success(a.isActive?`"${a.name}" dinonaktifkan.`:`"${a.name}" diaktifkan.`),F()):e.toast.error(b.error||"Gagal mengubah status."),q(null)},O=async a=>{if(!confirm(`Hapus paket "${a.name}"?

Semua order terkait juga akan dihapus.`))return;q(a.id);let b=await h(a.id);b.success?(e.toast.success(`Paket "${a.name}" berhasil dihapus.`),E(b=>{let c=new Set(b);return c.delete(a.id),c}),F()):e.toast.error(b.error||"Gagal menghapus paket."),q(null)},P=async()=>{let a=[...D];if(!a.length)return;let b=await k(a,{isActive:!0});b.success?(e.toast.success(`${b.count} paket diaktifkan.`),E(new Set),F()):e.toast.error(b.error)},Q=async()=>{let a=[...D];if(!a.length)return;let b=await k(a,{isActive:!1});b.success?(e.toast.success(`${b.count} paket dinonaktifkan.`),E(new Set),F()):e.toast.error(b.error)},R=async()=>{let a=[...D];if(!a.length||!confirm(`Hapus ${a.length} paket yang dipilih?

Semua order terkait juga akan dihapus. Tindakan ini tidak bisa diurungkan.`))return;let b=await j(a);b.success?(e.toast.success(`${b.count} paket berhasil dihapus.`),E(new Set),F()):e.toast.error(b.error)};return(0,b.jsxs)("div",{className:"space-y-5",children:[(0,b.jsxs)("header",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 border-b border-white/5 pb-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Manajemen Paket"}),(0,b.jsx)("p",{className:"text-neutral-400 mt-1",children:n?"Memuat...":`${a.length} paket terdaftar \xb7 ${G.length} ditampilkan`})]}),(0,b.jsxs)(d.default,{href:"/admin/packages/new",className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-500 hover:bg-blue-400 text-neutral-950 font-bold rounded-xl transition-all shadow-lg shadow-blue-500/20 shrink-0",children:[(0,b.jsx)("i",{className:"fa-solid fa-plus"})," Tambah Paket"]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)("i",{className:"fa-solid fa-magnifying-glass absolute left-3.5 top-1/2 -translate-y-1/2 text-neutral-500 text-sm"}),(0,b.jsx)("input",{type:"text",value:r,onChange:a=>s(a.target.value),placeholder:"Cari nama atau kategori paket...",className:"w-full bg-[#0d0f17] border border-white/10 rounded-xl pl-10 pr-4 py-2.5 text-sm text-white placeholder:text-neutral-600 focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/30 outline-none transition-all"}),r&&(0,b.jsx)("button",{onClick:()=>s(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-500 hover:text-white transition-colors",children:(0,b.jsx)("i",{className:"fa-solid fa-xmark text-sm"})})]}),(0,b.jsx)("button",{onClick:F,disabled:n,className:"px-3.5 py-2.5 bg-[#0d0f17] border border-white/10 rounded-xl text-neutral-400 hover:text-white hover:border-white/20 transition-all disabled:opacity-50",title:"Refresh",children:(0,b.jsx)("i",{className:`fa-solid fa-rotate-right text-sm ${n?"animate-spin":""}`})})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[(0,b.jsx)("div",{className:"flex gap-1 flex-wrap",children:l.map(a=>(0,b.jsx)("button",{onClick:()=>u(a),className:`px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${t===a?"bg-blue-500 text-neutral-950":"bg-[#0d0f17] border border-white/10 text-neutral-400 hover:text-white hover:border-white/20"}`,children:a},a))}),(0,b.jsxs)("div",{className:"ml-auto flex gap-2 items-center flex-wrap justify-end",children:[(0,b.jsxs)("select",{value:v,onChange:a=>w(a.target.value),className:"bg-[#0d0f17] border border-white/10 rounded-lg px-3 py-1.5 text-xs text-neutral-400 outline-none cursor-pointer hover:border-white/20 transition-all",children:[(0,b.jsx)("option",{value:"all",children:"Semua Status"}),(0,b.jsx)("option",{value:"active",children:"Aktif"}),(0,b.jsx)("option",{value:"inactive",children:"Nonaktif"})]}),(0,b.jsxs)("select",{value:x,onChange:a=>y(a.target.value),className:"bg-[#0d0f17] border border-white/10 rounded-lg px-3 py-1.5 text-xs text-neutral-400 outline-none cursor-pointer hover:border-white/20 transition-all",children:[(0,b.jsx)("option",{value:"sortOrder",children:"Urutan"}),(0,b.jsx)("option",{value:"name",children:"Nama A-Z"}),(0,b.jsx)("option",{value:"newest",children:"Terbaru"}),(0,b.jsx)("option",{value:"stock",children:"Stok ↓"}),(0,b.jsx)("option",{value:"orders",children:"Order ↓"})]}),(0,b.jsx)("select",{value:z,onChange:a=>A(Number(a.target.value)),className:"bg-[#0d0f17] border border-white/10 rounded-lg px-3 py-1.5 text-xs text-neutral-400 outline-none cursor-pointer hover:border-white/20 transition-all",children:m.map(a=>(0,b.jsxs)("option",{value:a,children:[a," / hal"]},a))})]})]})]}),D.size>0&&(0,b.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 bg-blue-500/10 border border-blue-500/20 rounded-xl text-sm",children:[(0,b.jsx)("i",{className:"fa-solid fa-check-square text-blue-400"}),(0,b.jsxs)("span",{className:"text-blue-300 font-semibold",children:[D.size," paket dipilih"]}),(0,b.jsxs)("div",{className:"ml-auto flex gap-2 flex-wrap",children:[(0,b.jsxs)("button",{onClick:P,className:"px-3 py-1.5 bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 hover:bg-emerald-500/20 rounded-lg text-xs font-semibold transition-colors",children:[(0,b.jsx)("i",{className:"fa-solid fa-eye mr-1"}),"Aktifkan"]}),(0,b.jsxs)("button",{onClick:Q,className:"px-3 py-1.5 bg-amber-500/10 text-amber-400 border border-amber-500/20 hover:bg-amber-500/20 rounded-lg text-xs font-semibold transition-colors",children:[(0,b.jsx)("i",{className:"fa-solid fa-eye-slash mr-1"}),"Nonaktifkan"]}),(0,b.jsxs)("button",{onClick:R,className:"px-3 py-1.5 bg-red-500/10 text-red-400 border border-red-500/20 hover:bg-red-500/20 rounded-lg text-xs font-semibold transition-colors",children:[(0,b.jsx)("i",{className:"fa-solid fa-trash mr-1"}),"Hapus"]}),(0,b.jsx)("button",{onClick:()=>E(new Set),className:"px-3 py-1.5 bg-neutral-800 text-neutral-400 hover:text-white rounded-lg text-xs font-semibold transition-colors",children:"Batalkan"})]})]}),!n&&G.length>0&&(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-neutral-500 px-1",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[(0,b.jsx)("input",{type:"checkbox",checked:K,ref:a=>{a&&(a.indeterminate=L&&!K)},onChange:()=>{K?E(a=>{let b=new Set(a);return J.forEach(a=>b.delete(a)),b}):E(a=>{let b=new Set(a);return J.forEach(a=>b.add(a)),b})},className:"w-4 h-4 rounded accent-blue-500 cursor-pointer"}),(0,b.jsxs)("span",{children:["Pilih semua di halaman ini (",I.length,")"]})]}),(0,b.jsxs)("span",{children:["Hal. ",B," dari ",H," · ",G.length," hasil"]})]}),n&&(0,b.jsx)("div",{className:"flex items-center justify-center py-24",children:(0,b.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full"})}),!n&&0===G.length&&(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-center bg-[#0d0f17] border border-dashed border-neutral-700 rounded-2xl",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-neutral-800 flex items-center justify-center mb-4",children:(0,b.jsx)("i",{className:`text-2xl text-neutral-500 fa-solid ${r||"Semua"!==t||"all"!==v?"fa-search":"fa-box-open"}`})}),(0,b.jsx)("h3",{className:"font-bold text-lg mb-2",children:r||"Semua"!==t||"all"!==v?"Tidak ada hasil":"Belum ada paket"}),(0,b.jsx)("p",{className:"text-neutral-500 mb-6 text-sm",children:r?`Tidak ditemukan paket dengan kata kunci "${r}".`:"Coba ubah filter atau tambah paket baru."}),r||"Semua"!==t||"all"!==v?(0,b.jsxs)("button",{onClick:()=>{s(""),u("Semua"),w("all")},className:"px-4 py-2 bg-neutral-800 hover:bg-neutral-700 rounded-xl text-sm font-semibold transition-colors",children:[(0,b.jsx)("i",{className:"fa-solid fa-xmark mr-2"}),"Reset Filter"]}):(0,b.jsxs)(d.default,{href:"/admin/packages/new",className:"px-5 py-2.5 bg-blue-500 hover:bg-blue-400 text-neutral-950 font-bold rounded-xl transition-all text-sm",children:[(0,b.jsx)("i",{className:"fa-solid fa-plus mr-2"}),"Tambah Paket Pertama"]})]}),!n&&I.length>0&&(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-5",children:I.map(a=>{let c=D.has(a.id),e=p===a.id;return(0,b.jsxs)("div",{className:`relative bg-[#0d0f17] border rounded-2xl overflow-hidden transition-all group ${c?"border-blue-500/50 ring-1 ring-blue-500/30":a.isActive?"border-white/5 hover:border-white/10":"border-white/5 opacity-60"}`,children:[(0,b.jsx)("div",{className:"absolute top-3 left-3 z-10",children:(0,b.jsx)("input",{type:"checkbox",checked:c,onChange:()=>M(a.id),className:"w-4 h-4 rounded accent-blue-500 cursor-pointer shadow-lg",onClick:a=>a.stopPropagation()})}),(0,b.jsxs)("div",{className:"relative h-44 bg-neutral-800 overflow-hidden cursor-pointer",onClick:()=>M(a.id),children:[a.imageUrl?(0,b.jsx)("img",{src:a.imageUrl,alt:a.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)("i",{className:"fa-solid fa-image text-4xl text-neutral-700"})}),(0,b.jsx)("div",{className:`absolute top-3 right-3 text-xs font-bold px-2.5 py-1 rounded-full backdrop-blur-sm ${a.isActive?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-neutral-700 text-neutral-400 border border-neutral-600"}`,children:a.isActive?"Aktif":"Nonaktif"}),(0,b.jsx)("div",{className:"absolute bottom-3 left-3 text-xs font-semibold px-2.5 py-1 rounded-full bg-black/60 text-neutral-300 backdrop-blur-sm",children:a.category})]}),(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-1",children:[(0,b.jsx)("h3",{className:"font-bold leading-tight line-clamp-1",children:a.name}),(0,b.jsx)("span",{className:"text-amber-400 font-bold text-sm shrink-0",children:a.price})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mt-2 text-xs",children:[(0,b.jsxs)("span",{className:`flex items-center gap-1 font-semibold ${0===a.stock?"text-red-400":a.stock<=5?"text-amber-400":"text-emerald-400"}`,children:[(0,b.jsx)("i",{className:"fa-solid fa-boxes-stacked"})," ",a.stock," stok"]}),(0,b.jsx)("span",{className:"text-neutral-700",children:"·"}),(0,b.jsxs)("span",{className:"text-neutral-500",children:[(0,b.jsx)("i",{className:"fa-solid fa-shopping-cart mr-1"}),a._count.orders," order"]}),(0,b.jsx)("span",{className:"text-neutral-700",children:"·"}),(0,b.jsxs)("span",{className:"text-neutral-600",children:["#",a.sortOrder]})]}),(0,b.jsxs)("div",{className:"flex gap-1.5 mt-3 pt-3 border-t border-neutral-800",children:[(0,b.jsxs)(d.default,{href:`/admin/packages/${a.id}/edit`,className:"flex-1 text-center text-xs font-semibold py-2 px-2 bg-neutral-800 hover:bg-neutral-700 rounded-lg transition-colors",children:[(0,b.jsx)("i",{className:"fa-solid fa-pen-to-square mr-1"}),"Edit"]}),(0,b.jsx)("button",{onClick:()=>N(a),disabled:e,className:`text-xs font-semibold py-2 px-2.5 rounded-lg transition-colors disabled:opacity-50 ${a.isActive?"bg-amber-500/10 text-amber-400 hover:bg-amber-500/20":"bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20"}`,title:a.isActive?"Nonaktifkan":"Aktifkan",children:(0,b.jsx)("i",{className:`fa-solid ${e?"fa-circle-notch animate-spin":a.isActive?"fa-eye-slash":"fa-eye"}`})}),(0,b.jsx)("button",{onClick:()=>O(a),disabled:e,className:"text-xs font-semibold py-2 px-2.5 bg-red-500/10 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors disabled:opacity-50",title:"Hapus paket",children:(0,b.jsx)("i",{className:`fa-solid ${e?"fa-circle-notch animate-spin":"fa-trash"}`})})]})]})]},a.id)})}),!n&&H>1&&(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 pt-2",children:[(0,b.jsx)("button",{onClick:()=>C(1),disabled:1===B,className:"w-9 h-9 flex items-center justify-center rounded-lg bg-[#0d0f17] border border-white/10 text-neutral-400 hover:text-white hover:border-white/20 transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:(0,b.jsx)("i",{className:"fa-solid fa-angles-left text-xs"})}),(0,b.jsx)("button",{onClick:()=>C(a=>Math.max(1,a-1)),disabled:1===B,className:"w-9 h-9 flex items-center justify-center rounded-lg bg-[#0d0f17] border border-white/10 text-neutral-400 hover:text-white hover:border-white/20 transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:(0,b.jsx)("i",{className:"fa-solid fa-angle-left text-xs"})}),Array.from({length:H},(a,b)=>b+1).filter(a=>1===a||a===H||1>=Math.abs(a-B)).reduce((a,b,c,d)=>(c>0&&b-d[c-1]>1&&a.push("..."),a.push(b),a),[]).map((a,c)=>"..."===a?(0,b.jsx)("span",{className:"text-neutral-600 px-1",children:"…"},`ellipsis-${c}`):(0,b.jsx)("button",{onClick:()=>C(a),className:`w-9 h-9 flex items-center justify-center rounded-lg text-sm font-semibold transition-all ${B===a?"bg-blue-500 text-neutral-950":"bg-[#0d0f17] border border-white/10 text-neutral-400 hover:text-white hover:border-white/20"}`,children:a},a)),(0,b.jsx)("button",{onClick:()=>C(a=>Math.min(H,a+1)),disabled:B===H,className:"w-9 h-9 flex items-center justify-center rounded-lg bg-[#0d0f17] border border-white/10 text-neutral-400 hover:text-white hover:border-white/20 transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:(0,b.jsx)("i",{className:"fa-solid fa-angle-right text-xs"})}),(0,b.jsx)("button",{onClick:()=>C(H),disabled:B===H,className:"w-9 h-9 flex items-center justify-center rounded-lg bg-[#0d0f17] border border-white/10 text-neutral-400 hover:text-white hover:border-white/20 transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:(0,b.jsx)("i",{className:"fa-solid fa-angles-right text-xs"})})]})]})}a.s(["default",()=>n],17606)}];

//# sourceMappingURL=toro-store-app_src_app_admin_packages_page_tsx_7208f2f4._.js.map