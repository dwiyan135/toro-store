{"version":3,"sources":["../../../../../toro-store-app/src/app/admin/orders/page.tsx","../../../../../toro-store-app/src/actions/data%3A4b8a9c%20%3Ctext/javascript%3E","../../../../../toro-store-app/src/actions/data%3Aa42b26%20%3Ctext/javascript%3E"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { getAdminOrders, updateOrderStatus } from '@/actions/order';\r\n\r\ntype Order = {\r\n  id: string;\r\n  orderCode: string;\r\n  package: { name: string; category: string } | null;\r\n  itemName: string;\r\n  mlbbId: string;\r\n  serverId: string;\r\n  nickname: string | null;\r\n  waNumber: string | null;\r\n  status: 'NEW' | 'CONFIRMED' | 'DONE' | 'CANCELED';\r\n  createdAt: Date;\r\n};\r\n\r\nconst statusColors: Record<string, string> = {\r\n  NEW: 'bg-blue-500/10 text-blue-400 border-blue-500/30',\r\n  CONFIRMED: 'bg-amber-500/10 text-amber-400 border-amber-500/30',\r\n  DONE: 'bg-emerald-500/10 text-emerald-400 border-emerald-500/30',\r\n  CANCELED: 'bg-red-500/10 text-red-400 border-red-500/30',\r\n};\r\n\r\nexport default function AdminOrdersPage() {\r\n  const [orders, setOrders] = useState<Order[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [updatingId, setUpdatingId] = useState<string | null>(null);\r\n  const [filter, setFilter] = useState<'ALL' | 'NEW' | 'CONFIRMED' | 'DONE' | 'CANCELED'>('ALL');\r\n\r\n  useEffect(() => { fetchOrders(); }, []);\r\n\r\n  const fetchOrders = async () => {\r\n    setIsLoading(true);\r\n    const data = await getAdminOrders();\r\n    // @ts-ignore\r\n    setOrders(data);\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const handleStatusChange = async (id: string, newStatus: 'NEW' | 'CONFIRMED' | 'DONE' | 'CANCELED') => {\r\n    setUpdatingId(id);\r\n    const res = await updateOrderStatus(id, newStatus);\r\n    if (res.success) await fetchOrders();\r\n    else alert(res.error);\r\n    setUpdatingId(null);\r\n  };\r\n\r\n  const copyTemplate = (order: Order) => {\r\n    const text = `Halo kak ${order.nickname || ''},\\n\\nOrder #${order.orderCode} (${order.package?.name ?? ''}) untuk skin/event \"${order.itemName}\" sudah kami proses ya.\\n\\nTerima kasih sudah percayakan ke Toro Store! ðŸŽ®`;\r\n    navigator.clipboard.writeText(text);\r\n    alert('Template balasan disalin!');\r\n  };\r\n\r\n  const filtered = filter === 'ALL' ? orders : orders.filter(o => o.status === filter);\r\n\r\n  if (isLoading) return (\r\n    <div className=\"flex items-center justify-center py-24\">\r\n      <div className=\"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full\"></div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <header className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4 border-b border-white/5 pb-5\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold\">Data Order</h1>\r\n          <p className=\"text-neutral-400 mt-1\">{orders.length} total pesanan masuk</p>\r\n        </div>\r\n        <button onClick={fetchOrders} className=\"inline-flex items-center gap-2 bg-neutral-800 hover:bg-neutral-700 px-4 py-2.5 rounded-xl transition-colors text-sm font-medium shrink-0\">\r\n          <i className=\"fa-solid fa-rotate-right\"></i> Refresh\r\n        </button>\r\n      </header>\r\n\r\n      {/* Filter Tabs */}\r\n      <div className=\"flex gap-2 flex-wrap\">\r\n        {(['ALL', 'NEW', 'CONFIRMED', 'DONE', 'CANCELED'] as const).map(s => (\r\n          <button\r\n            key={s}\r\n            onClick={() => setFilter(s)}\r\n            className={`px-4 py-1.5 rounded-full text-sm font-semibold transition-all ${\r\n              filter === s\r\n                ? s === 'ALL' ? 'bg-white text-neutral-950' : `${statusColors[s]} border`\r\n                : 'bg-neutral-800 text-neutral-500 hover:text-white'\r\n            }`}\r\n          >\r\n            {s === 'ALL' ? `Semua (${orders.length})` : `${s} (${orders.filter(o => o.status === s).length})`}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"bg-[#0d0f17] border border-white/5 rounded-2xl overflow-hidden\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full text-left border-collapse min-w-[900px]\">\r\n            <thead>\r\n              <tr className=\"border-b border-white/5\">\r\n                <th className=\"p-4 text-xs font-semibold text-neutral-500 uppercase tracking-wider\">Order</th>\r\n                <th className=\"p-4 text-xs font-semibold text-neutral-500 uppercase tracking-wider\">Detail Game</th>\r\n                <th className=\"p-4 text-xs font-semibold text-neutral-500 uppercase tracking-wider\">Pesanan</th>\r\n                <th className=\"p-4 text-xs font-semibold text-neutral-500 uppercase tracking-wider\">Status</th>\r\n                <th className=\"p-4 text-xs font-semibold text-neutral-500 uppercase tracking-wider text-right\">Aksi</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-white/5\">\r\n              {filtered.map((order) => (\r\n                <tr key={order.id} className=\"hover:bg-white/[0.02] transition-colors\">\r\n                  <td className=\"p-4 align-top\">\r\n                    <div className=\"font-mono text-sm text-blue-400 font-bold\">{order.orderCode}</div>\r\n                    <div className=\"text-xs text-neutral-600 mt-1\">{new Date(order.createdAt).toLocaleString('id-ID')}</div>\r\n                  </td>\r\n                  <td className=\"p-4 align-top\">\r\n                    <div className=\"text-sm\"><span className=\"text-neutral-500\">ID:</span> <span className=\"font-mono\">{order.mlbbId}</span> <span className=\"text-neutral-600\">({order.serverId})</span></div>\r\n                    {order.nickname && <div className=\"text-sm mt-1 text-neutral-400\">{order.nickname}</div>}\r\n                    {order.waNumber && <div className=\"text-xs mt-1 text-neutral-600 font-mono\">{order.waNumber}</div>}\r\n                  </td>\r\n                  <td className=\"p-4 align-top\">\r\n                    <div className=\"text-sm font-bold text-amber-400\">{order.package?.name ?? <span className=\"text-neutral-600 italic\">Paket dihapus</span>}</div>\r\n                    <div className=\"text-sm text-neutral-300 mt-0.5\">{order.itemName}</div>\r\n                    {order.package?.category && <div className=\"text-xs text-neutral-600 mt-1\">{order.package.category}</div>}\r\n                  </td>\r\n                  <td className=\"p-4 align-top\">\r\n                    <select\r\n                      value={order.status}\r\n                      disabled={updatingId === order.id}\r\n                      onChange={(e) => handleStatusChange(order.id, e.target.value as Order['status'])}\r\n                      className={`text-xs font-bold rounded-lg px-3 py-2 border appearance-none cursor-pointer outline-none transition-all ${statusColors[order.status]} ${updatingId === order.id ? 'opacity-50 cursor-wait' : ''}`}\r\n                    >\r\n                      <option value=\"NEW\">NEW</option>\r\n                      <option value=\"CONFIRMED\">CONFIRMED</option>\r\n                      <option value=\"DONE\">DONE</option>\r\n                      <option value=\"CANCELED\">CANCELED</option>\r\n                    </select>\r\n                  </td>\r\n                  <td className=\"p-4 align-top text-right\">\r\n                    <div className=\"flex items-center gap-2 justify-end\">\r\n                      <button onClick={() => copyTemplate(order)} className=\"w-8 h-8 flex items-center justify-center bg-neutral-800 hover:bg-neutral-700 rounded-lg border border-neutral-700 transition text-neutral-400 hover:text-white\" title=\"Copy template WA\">\r\n                        <i className=\"fa-regular fa-copy text-xs\"></i>\r\n                      </button>\r\n                      {order.waNumber && (\r\n                        <a href={`https://wa.me/${order.waNumber}`} target=\"_blank\"\r\n                          className=\"w-8 h-8 flex items-center justify-center bg-[#25d366]/10 hover:bg-[#25d366]/20 rounded-lg border border-[#25d366]/20 text-[#25d366] transition\">\r\n                          <i className=\"fa-brands fa-whatsapp text-xs\"></i>\r\n                        </a>\r\n                      )}\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n              {filtered.length === 0 && (\r\n                <tr><td colSpan={5} className=\"p-16 text-center\">\r\n                  <i className=\"fa-solid fa-inbox text-4xl text-neutral-700 mb-3 block\"></i>\r\n                  <p className=\"text-neutral-500\">Tidak ada order dengan filter ini.</p>\r\n                </td></tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/* __next_internal_action_entry_do_not_use__ [{\"0003e24c72119d99d60e6b08897eee34e39314d8d6\":\"getAdminOrders\"},\"toro-store-app/src/actions/order.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_1=/*#__PURE__*/createServerReference(\"0003e24c72119d99d60e6b08897eee34e39314d8d6\",callServer,void 0,findSourceMapURL,\"getAdminOrders\");export{$$RSC_SERVER_ACTION_1 as getAdminOrders};","/* __next_internal_action_entry_do_not_use__ [{\"607a4ba007ad35822c250f276d7b610909fc4e837d\":\"updateOrderStatus\"},\"toro-store-app/src/actions/order.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_2=/*#__PURE__*/createServerReference(\"607a4ba007ad35822c250f276d7b610909fc4e837d\",callServer,void 0,findSourceMapURL,\"updateOrderStatus\");export{$$RSC_SERVER_ACTION_2 as updateOrderStatus};"],"names":[],"mappings":"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"}