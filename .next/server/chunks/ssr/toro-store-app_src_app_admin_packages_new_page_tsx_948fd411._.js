module.exports=[3578,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(5050);let e=(0,d.createServerReference)("4025fd0bf5d8db3ddbd01d6012244b6fce0a3f9499",d.callServer,void 0,d.findSourceMapURL,"createPackage");var f=a.i(50944),g=a.i(20094);function h(a){return a.replace(/\D/g,"")}function i(){let a,d=(0,f.useRouter)(),i=(0,c.useRef)(null),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(0),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!1),F=function(a){let b=a.replace(/\D/g,"");if(!b)return"";let c=parseInt(b,10);return isNaN(c)?"":"Rp "+c.toLocaleString("id-ID")}(n),G=parseInt(r||"0",10),H=async a=>{let b=a.target.files?.[0];if(!b)return;A(URL.createObjectURL(b)),C(!0);let c=new FormData;c.append("file",b);try{let a=await fetch("/api/upload",{method:"POST",body:c}),b=await a.json();b.success&&b.url?(y(b.url),g.toast.success("Gambar berhasil diupload!")):g.toast.error(b.error||"Upload gagal")}catch{g.toast.error("Upload gagal. Coba lagi.")}finally{C(!1)}},I=async a=>{if(a.preventDefault(),!j.trim())return void g.toast.error("Nama paket wajib diisi.");if(!n)return void g.toast.error("Harga wajib diisi.");if(!p)return void g.toast.error("Kategori wajib dipilih.");E(!0);let b=await e({name:j.trim(),description:l.trim()||void 0,price:F,category:p,imageUrl:x||void 0,stock:G,isActive:v,sortOrder:t});b.success?(g.toast.success("Paket berhasil ditambahkan!"),setTimeout(()=>d.push("/admin/packages"),800)):(g.toast.error(b.error||"Gagal membuat paket."),E(!1))};return(0,b.jsxs)("div",{className:"max-w-2xl",children:[(0,b.jsxs)("header",{className:"mb-8 border-b border-neutral-800 pb-5",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Tambah Paket Baru"}),(0,b.jsx)("p",{className:"text-neutral-400 mt-1",children:"Isi detail paket yang akan ditampilkan di halaman utama."})]}),(0,b.jsxs)("form",{onSubmit:I,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-neutral-300",children:"Gambar Paket"}),(0,b.jsxs)("div",{className:"relative h-48 bg-neutral-900 border-2 border-dashed border-neutral-700 hover:border-blue-500/50 rounded-xl cursor-pointer transition-colors overflow-hidden",onClick:()=>i.current?.click(),children:[z?(0,b.jsx)("img",{src:z,alt:"preview",className:"w-full h-full object-cover"}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full gap-2 text-neutral-500",children:[(0,b.jsx)("i",{className:"fa-solid fa-cloud-arrow-up text-3xl"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Klik untuk upload gambar"}),(0,b.jsx)("span",{className:"text-xs",children:"JPG, PNG, WebP — maks. 10MB"})]}),B&&(0,b.jsxs)("div",{className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center gap-2",children:[(0,b.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full"}),(0,b.jsx)("span",{className:"text-xs text-neutral-400",children:"Mengupload & konversi ke WebP..."})]}),x&&!B&&(0,b.jsxs)("div",{className:"absolute bottom-2 left-2 right-2 flex items-center gap-1.5 bg-emerald-500/20 border border-emerald-500/30 px-2.5 py-1.5 rounded-lg",children:[(0,b.jsx)("i",{className:"fa-solid fa-check text-emerald-400 text-xs"}),(0,b.jsx)("span",{className:"text-xs text-emerald-400 font-medium",children:"Gambar berhasil diupload (WebP)"}),(0,b.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),y(""),A("")},className:"ml-auto text-neutral-500 hover:text-red-400 transition-colors text-xs",children:(0,b.jsx)("i",{className:"fa-solid fa-xmark"})})]})]}),(0,b.jsx)("input",{ref:i,type:"file",accept:"image/*",className:"hidden",onChange:H})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-neutral-300",children:["Nama Paket ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:j,onChange:a=>k(a.target.value),placeholder:"cth: Basic Gift Skin Lylia",className:"w-full bg-neutral-900 border border-neutral-700 rounded-xl px-4 py-3 text-white placeholder:text-neutral-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all outline-none"})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-neutral-300",children:["Kategori ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("select",{value:p,onChange:a=>q(a.target.value),className:"w-full bg-neutral-900 border border-neutral-700 rounded-xl px-4 py-3 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all outline-none appearance-none cursor-pointer",children:[(0,b.jsx)("option",{value:"",children:"Pilih Kategori..."}),(0,b.jsx)("option",{value:"Basic",children:"Basic"}),(0,b.jsx)("option",{value:"Premium",children:"Premium"}),(0,b.jsx)("option",{value:"Special",children:"Special"}),(0,b.jsx)("option",{value:"Event",children:"Event"}),(0,b.jsx)("option",{value:"Limited",children:"Limited"})]}),(0,b.jsx)("i",{className:"fa-solid fa-chevron-down absolute right-4 top-1/2 -translate-y-1/2 text-neutral-500 text-xs pointer-events-none"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-neutral-300",children:"Deskripsi"}),(0,b.jsx)("textarea",{value:l,onChange:a=>m(a.target.value),placeholder:"Deskripsi singkat tentang isi paket ini...",rows:3,className:"w-full bg-neutral-900 border border-neutral-700 rounded-xl px-4 py-3 text-white placeholder:text-neutral-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all outline-none resize-none"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-neutral-300",children:["Harga ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-neutral-500 font-semibold text-sm select-none",children:"Rp"}),(0,b.jsx)("input",{type:"text",inputMode:"numeric",value:n?parseInt(n,10).toLocaleString("id-ID"):"",onChange:a=>{o(h(a.target.value))},placeholder:"0",className:"w-full bg-neutral-900 border border-neutral-700 rounded-xl pl-10 pr-4 py-3 text-white font-mono text-lg placeholder:text-neutral-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all outline-none"})]}),n?(0,b.jsxs)("p",{className:"text-xs text-amber-400 flex items-center gap-1",children:[(0,b.jsx)("i",{className:"fa-solid fa-tag"}),(a=parseInt(n||"0",10))?a>=1e12?`${(a/1e12).toFixed(2).replace(".",",")} Triliun`:a>=1e9?`${(a/1e9).toFixed(2).replace(".",",")} Miliar`:a>=1e6?`${(a/1e6).toFixed(2).replace(".",",")} Juta`:a>=1e3?`${(a/1e3).toFixed(0)} Ribu`:a.toString():""," · disimpan sebagai ",(0,b.jsx)("span",{className:"font-mono",children:F})]}):(0,b.jsx)("p",{className:"text-xs text-neutral-600",children:"Ketik angka, format otomatis  — cth: 50000"})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-neutral-300",children:"Stok"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-neutral-500 text-sm select-none",children:(0,b.jsx)("i",{className:"fa-solid fa-boxes-stacked"})}),(0,b.jsx)("input",{type:"text",inputMode:"numeric",value:r,onChange:a=>{s(h(a.target.value))},placeholder:"0",className:"w-full bg-neutral-900 border border-neutral-700 rounded-xl pl-10 pr-4 py-3 text-white font-mono text-lg placeholder:text-neutral-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all outline-none"})]}),(0,b.jsx)("p",{className:`text-xs flex items-center gap-1 ${0===G?"text-neutral-600":G<=5?"text-amber-400":"text-emerald-400"}`,children:0===G?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fa-solid fa-ban"})," Stok 0 — tidak bisa diorder"]}):G<=5?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fa-solid fa-triangle-exclamation"})," Hampir habis — ",G," unit tersisa"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fa-solid fa-check"})," ",G," unit tersedia"]})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-neutral-300",children:"Urutan Tampil"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>u(Math.max(0,t-1)),className:"w-10 h-12 flex items-center justify-center bg-neutral-800 hover:bg-neutral-700 rounded-xl border border-neutral-700 text-neutral-300 transition-colors shrink-0",children:(0,b.jsx)("i",{className:"fa-solid fa-minus text-xs"})}),(0,b.jsx)("div",{className:"flex-1 bg-neutral-900 border border-neutral-700 rounded-xl px-3 py-3 text-center font-mono text-white text-lg font-bold",children:t}),(0,b.jsx)("button",{type:"button",onClick:()=>u(t+1),className:"w-10 h-12 flex items-center justify-center bg-neutral-800 hover:bg-neutral-700 rounded-xl border border-neutral-700 text-neutral-300 transition-colors shrink-0",children:(0,b.jsx)("i",{className:"fa-solid fa-plus text-xs"})})]}),(0,b.jsx)("p",{className:"text-xs text-neutral-600",children:"Angka kecil muncul lebih dulu"})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-neutral-300",children:"Status Paket"}),(0,b.jsxs)("button",{type:"button",onClick:()=>w(!v),className:`w-full h-12 rounded-xl font-semibold text-sm transition-all border flex items-center justify-center gap-2 ${v?"bg-emerald-500/10 text-emerald-400 border-emerald-500/30 hover:bg-emerald-500/20":"bg-neutral-800 text-neutral-400 border-neutral-700 hover:bg-neutral-700"}`,children:[(0,b.jsx)("i",{className:`fa-solid ${v?"fa-eye":"fa-eye-slash"}`}),v?"Aktif — Tampil di publik":"Nonaktif — Disembunyikan"]}),(0,b.jsx)("p",{className:"text-xs text-neutral-600",children:v?"Pelanggan bisa melihat dan memesan paket ini.":"Paket tidak tampil di halaman utama."})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-2 border-t border-neutral-800",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>d.back(),className:"px-6 py-3 rounded-xl bg-neutral-800 hover:bg-neutral-700 font-semibold transition-colors text-sm",children:[(0,b.jsx)("i",{className:"fa-solid fa-arrow-left mr-2 text-xs"})," Batal"]}),(0,b.jsx)("button",{type:"submit",disabled:D||B,className:"flex-1 py-3 px-6 bg-blue-500 hover:bg-blue-400 text-neutral-950 font-bold rounded-xl transition-all disabled:opacity-50 shadow-lg shadow-blue-500/20 text-sm",children:D?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fa-solid fa-circle-notch animate-spin mr-2"}),"Menyimpan..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fa-solid fa-floppy-disk mr-2"}),"Simpan Paket"]})})]})]})]})}a.s(["default",()=>i],3578)}];

//# sourceMappingURL=toro-store-app_src_app_admin_packages_new_page_tsx_948fd411._.js.map