(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78619,e=>{"use strict";var t=e.i(95187);let a=(0,t.createServerReference)("60fdbde4d29d67209ccf4876f8d564273206849906",t.callServer,void 0,t.findSourceMapURL,"updatePackage");e.s(["updatePackage",()=>a])},64842,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(22016),r=e.i(70319),l=e.i(95187);let i=(0,l.createServerReference)("00bf5bb6ae0836908cd09bca8b09567e320355edfe",l.callServer,void 0,l.findSourceMapURL,"getAdminPackages"),n=(0,l.createServerReference)("40c36cea8ee0ea340a719713fe6416e15ae2c9f16b",l.callServer,void 0,l.findSourceMapURL,"deletePackage");var o=e.i(78619);let d=(0,l.createServerReference)("400606749c04c88e038e57aabb785454ba0370a5e6",l.callServer,void 0,l.findSourceMapURL,"bulkDeletePackages"),c=(0,l.createServerReference)("607c92be919f7a7a0f4c88af65e19c471f3103379d",l.callServer,void 0,l.findSourceMapURL,"bulkUpdatePackages"),u=["Semua","Basic","Premium","Special","Event","Limited"],x=[6,12,24];function m(){let[e,l]=(0,a.useState)([]),[m,h]=(0,a.useState)(!0),[b,f]=(0,a.useState)(null),[p,g]=(0,a.useState)(""),[v,j]=(0,a.useState)("Semua"),[k,N]=(0,a.useState)("all"),[w,y]=(0,a.useState)("sortOrder"),[S,C]=(0,a.useState)(12),[A,$]=(0,a.useState)(1),[P,R]=(0,a.useState)(new Set),M=(0,a.useCallback)(async()=>{h(!0),l(await i()),h(!1)},[]);(0,a.useEffect)(()=>{M()},[M]),(0,a.useEffect)(()=>{$(1),R(new Set)},[p,v,k,w,S]);let T=(0,a.useMemo)(()=>{let t=[...e];if(p.trim()){let e=p.toLowerCase();t=t.filter(t=>t.name.toLowerCase().includes(e)||t.category.toLowerCase().includes(e))}return"Semua"!==v&&(t=t.filter(e=>e.category===v)),"active"===k&&(t=t.filter(e=>e.isActive)),"inactive"===k&&(t=t.filter(e=>!e.isActive)),t.sort((e,t)=>{switch(w){case"name":return e.name.localeCompare(t.name);case"price":return e.price.localeCompare(t.price);case"stock":return t.stock-e.stock;case"orders":return t._count.orders-e._count.orders;case"newest":return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime();default:return e.sortOrder-t.sortOrder}}),t},[e,p,v,k,w]),U=Math.max(1,Math.ceil(T.length/S)),L=T.slice((A-1)*S,A*S),O=L.map(e=>e.id),E=O.length>0&&O.every(e=>P.has(e)),B=O.some(e=>P.has(e)),H=e=>{R(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})},z=async e=>{f(e.id);let t=await (0,o.updatePackage)(e.id,{isActive:!e.isActive});t.success?(r.toast.success(e.isActive?`"${e.name}" dinonaktifkan.`:`"${e.name}" diaktifkan.`),M()):r.toast.error(t.error||"Gagal mengubah status."),f(null)},D=async e=>{if(!confirm(`Hapus paket "${e.name}"?

Semua order terkait juga akan dihapus.`))return;f(e.id);let t=await n(e.id);t.success?(r.toast.success(`Paket "${e.name}" berhasil dihapus.`),R(t=>{let a=new Set(t);return a.delete(e.id),a}),M()):r.toast.error(t.error||"Gagal menghapus paket."),f(null)},_=async()=>{let e=[...P];if(!e.length)return;let t=await c(e,{isActive:!0});t.success?(r.toast.success(`${t.count} paket diaktifkan.`),R(new Set),M()):r.toast.error(t.error)},q=async()=>{let e=[...P];if(!e.length)return;let t=await c(e,{isActive:!1});t.success?(r.toast.success(`${t.count} paket dinonaktifkan.`),R(new Set),M()):r.toast.error(t.error)},G=async()=>{let e=[...P];if(!e.length||!confirm(`Hapus ${e.length} paket yang dipilih?

Semua order terkait juga akan dihapus. Tindakan ini tidak bisa diurungkan.`))return;let t=await d(e);t.success?(r.toast.success(`${t.count} paket berhasil dihapus.`),R(new Set),M()):r.toast.error(t.error)};return(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsxs)("header",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 border-b border-white/5 pb-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Manajemen Paket"}),(0,t.jsx)("p",{className:"text-neutral-400 mt-1",children:m?"Memuat...":`${e.length} paket terdaftar \xb7 ${T.length} ditampilkan`})]}),(0,t.jsxs)(s.default,{href:"/admin/packages/new",className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-500 hover:bg-blue-400 text-neutral-950 font-bold rounded-xl transition-all shadow-lg shadow-blue-500/20 shrink-0",children:[(0,t.jsx)("i",{className:"fa-solid fa-plus"})," Tambah Paket"]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)("i",{className:"fa-solid fa-magnifying-glass absolute left-3.5 top-1/2 -translate-y-1/2 text-neutral-500 text-sm"}),(0,t.jsx)("input",{type:"text",value:p,onChange:e=>g(e.target.value),placeholder:"Cari nama atau kategori paket...",className:"w-full bg-[#0d0f17] border border-white/10 rounded-xl pl-10 pr-4 py-2.5 text-sm text-white placeholder:text-neutral-600 focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/30 outline-none transition-all"}),p&&(0,t.jsx)("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-500 hover:text-white transition-colors",children:(0,t.jsx)("i",{className:"fa-solid fa-xmark text-sm"})})]}),(0,t.jsx)("button",{onClick:M,disabled:m,className:"px-3.5 py-2.5 bg-[#0d0f17] border border-white/10 rounded-xl text-neutral-400 hover:text-white hover:border-white/20 transition-all disabled:opacity-50",title:"Refresh",children:(0,t.jsx)("i",{className:`fa-solid fa-rotate-right text-sm ${m?"animate-spin":""}`})})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[(0,t.jsx)("div",{className:"flex gap-1 flex-wrap",children:u.map(e=>(0,t.jsx)("button",{onClick:()=>j(e),className:`px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${v===e?"bg-blue-500 text-neutral-950":"bg-[#0d0f17] border border-white/10 text-neutral-400 hover:text-white hover:border-white/20"}`,children:e},e))}),(0,t.jsxs)("div",{className:"ml-auto flex gap-2 items-center flex-wrap justify-end",children:[(0,t.jsxs)("select",{value:k,onChange:e=>N(e.target.value),className:"bg-[#0d0f17] border border-white/10 rounded-lg px-3 py-1.5 text-xs text-neutral-400 outline-none cursor-pointer hover:border-white/20 transition-all",children:[(0,t.jsx)("option",{value:"all",children:"Semua Status"}),(0,t.jsx)("option",{value:"active",children:"Aktif"}),(0,t.jsx)("option",{value:"inactive",children:"Nonaktif"})]}),(0,t.jsxs)("select",{value:w,onChange:e=>y(e.target.value),className:"bg-[#0d0f17] border border-white/10 rounded-lg px-3 py-1.5 text-xs text-neutral-400 outline-none cursor-pointer hover:border-white/20 transition-all",children:[(0,t.jsx)("option",{value:"sortOrder",children:"Urutan"}),(0,t.jsx)("option",{value:"name",children:"Nama A-Z"}),(0,t.jsx)("option",{value:"newest",children:"Terbaru"}),(0,t.jsx)("option",{value:"stock",children:"Stok ↓"}),(0,t.jsx)("option",{value:"orders",children:"Order ↓"})]}),(0,t.jsx)("select",{value:S,onChange:e=>C(Number(e.target.value)),className:"bg-[#0d0f17] border border-white/10 rounded-lg px-3 py-1.5 text-xs text-neutral-400 outline-none cursor-pointer hover:border-white/20 transition-all",children:x.map(e=>(0,t.jsxs)("option",{value:e,children:[e," / hal"]},e))})]})]})]}),P.size>0&&(0,t.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 bg-blue-500/10 border border-blue-500/20 rounded-xl text-sm",children:[(0,t.jsx)("i",{className:"fa-solid fa-check-square text-blue-400"}),(0,t.jsxs)("span",{className:"text-blue-300 font-semibold",children:[P.size," paket dipilih"]}),(0,t.jsxs)("div",{className:"ml-auto flex gap-2 flex-wrap",children:[(0,t.jsxs)("button",{onClick:_,className:"px-3 py-1.5 bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 hover:bg-emerald-500/20 rounded-lg text-xs font-semibold transition-colors",children:[(0,t.jsx)("i",{className:"fa-solid fa-eye mr-1"}),"Aktifkan"]}),(0,t.jsxs)("button",{onClick:q,className:"px-3 py-1.5 bg-amber-500/10 text-amber-400 border border-amber-500/20 hover:bg-amber-500/20 rounded-lg text-xs font-semibold transition-colors",children:[(0,t.jsx)("i",{className:"fa-solid fa-eye-slash mr-1"}),"Nonaktifkan"]}),(0,t.jsxs)("button",{onClick:G,className:"px-3 py-1.5 bg-red-500/10 text-red-400 border border-red-500/20 hover:bg-red-500/20 rounded-lg text-xs font-semibold transition-colors",children:[(0,t.jsx)("i",{className:"fa-solid fa-trash mr-1"}),"Hapus"]}),(0,t.jsx)("button",{onClick:()=>R(new Set),className:"px-3 py-1.5 bg-neutral-800 text-neutral-400 hover:text-white rounded-lg text-xs font-semibold transition-colors",children:"Batalkan"})]})]}),!m&&T.length>0&&(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-neutral-500 px-1",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[(0,t.jsx)("input",{type:"checkbox",checked:E,ref:e=>{e&&(e.indeterminate=B&&!E)},onChange:()=>{E?R(e=>{let t=new Set(e);return O.forEach(e=>t.delete(e)),t}):R(e=>{let t=new Set(e);return O.forEach(e=>t.add(e)),t})},className:"w-4 h-4 rounded accent-blue-500 cursor-pointer"}),(0,t.jsxs)("span",{children:["Pilih semua di halaman ini (",L.length,")"]})]}),(0,t.jsxs)("span",{children:["Hal. ",A," dari ",U," · ",T.length," hasil"]})]}),m&&(0,t.jsx)("div",{className:"flex items-center justify-center py-24",children:(0,t.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full"})}),!m&&0===T.length&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-center bg-[#0d0f17] border border-dashed border-neutral-700 rounded-2xl",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-neutral-800 flex items-center justify-center mb-4",children:(0,t.jsx)("i",{className:`text-2xl text-neutral-500 fa-solid ${p||"Semua"!==v||"all"!==k?"fa-search":"fa-box-open"}`})}),(0,t.jsx)("h3",{className:"font-bold text-lg mb-2",children:p||"Semua"!==v||"all"!==k?"Tidak ada hasil":"Belum ada paket"}),(0,t.jsx)("p",{className:"text-neutral-500 mb-6 text-sm",children:p?`Tidak ditemukan paket dengan kata kunci "${p}".`:"Coba ubah filter atau tambah paket baru."}),p||"Semua"!==v||"all"!==k?(0,t.jsxs)("button",{onClick:()=>{g(""),j("Semua"),N("all")},className:"px-4 py-2 bg-neutral-800 hover:bg-neutral-700 rounded-xl text-sm font-semibold transition-colors",children:[(0,t.jsx)("i",{className:"fa-solid fa-xmark mr-2"}),"Reset Filter"]}):(0,t.jsxs)(s.default,{href:"/admin/packages/new",className:"px-5 py-2.5 bg-blue-500 hover:bg-blue-400 text-neutral-950 font-bold rounded-xl transition-all text-sm",children:[(0,t.jsx)("i",{className:"fa-solid fa-plus mr-2"}),"Tambah Paket Pertama"]})]}),!m&&L.length>0&&(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-5",children:L.map(e=>{let a=P.has(e.id),r=b===e.id;return(0,t.jsxs)("div",{className:`relative bg-[#0d0f17] border rounded-2xl overflow-hidden transition-all group ${a?"border-blue-500/50 ring-1 ring-blue-500/30":e.isActive?"border-white/5 hover:border-white/10":"border-white/5 opacity-60"}`,children:[(0,t.jsx)("div",{className:"absolute top-3 left-3 z-10",children:(0,t.jsx)("input",{type:"checkbox",checked:a,onChange:()=>H(e.id),className:"w-4 h-4 rounded accent-blue-500 cursor-pointer shadow-lg",onClick:e=>e.stopPropagation()})}),(0,t.jsxs)("div",{className:"relative h-44 bg-neutral-800 overflow-hidden cursor-pointer",onClick:()=>H(e.id),children:[e.imageUrl?(0,t.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)("i",{className:"fa-solid fa-image text-4xl text-neutral-700"})}),(0,t.jsx)("div",{className:`absolute top-3 right-3 text-xs font-bold px-2.5 py-1 rounded-full backdrop-blur-sm ${e.isActive?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-neutral-700 text-neutral-400 border border-neutral-600"}`,children:e.isActive?"Aktif":"Nonaktif"}),(0,t.jsx)("div",{className:"absolute bottom-3 left-3 text-xs font-semibold px-2.5 py-1 rounded-full bg-black/60 text-neutral-300 backdrop-blur-sm",children:e.category})]}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-1",children:[(0,t.jsx)("h3",{className:"font-bold leading-tight line-clamp-1",children:e.name}),(0,t.jsx)("span",{className:"text-amber-400 font-bold text-sm shrink-0",children:e.price})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-2 text-xs",children:[(0,t.jsxs)("span",{className:`flex items-center gap-1 font-semibold ${0===e.stock?"text-red-400":e.stock<=5?"text-amber-400":"text-emerald-400"}`,children:[(0,t.jsx)("i",{className:"fa-solid fa-boxes-stacked"})," ",e.stock," stok"]}),(0,t.jsx)("span",{className:"text-neutral-700",children:"·"}),(0,t.jsxs)("span",{className:"text-neutral-500",children:[(0,t.jsx)("i",{className:"fa-solid fa-shopping-cart mr-1"}),e._count.orders," order"]}),(0,t.jsx)("span",{className:"text-neutral-700",children:"·"}),(0,t.jsxs)("span",{className:"text-neutral-600",children:["#",e.sortOrder]})]}),(0,t.jsxs)("div",{className:"flex gap-1.5 mt-3 pt-3 border-t border-neutral-800",children:[(0,t.jsxs)(s.default,{href:`/admin/packages/${e.id}/edit`,className:"flex-1 text-center text-xs font-semibold py-2 px-2 bg-neutral-800 hover:bg-neutral-700 rounded-lg transition-colors",children:[(0,t.jsx)("i",{className:"fa-solid fa-pen-to-square mr-1"}),"Edit"]}),(0,t.jsx)("button",{onClick:()=>z(e),disabled:r,className:`text-xs font-semibold py-2 px-2.5 rounded-lg transition-colors disabled:opacity-50 ${e.isActive?"bg-amber-500/10 text-amber-400 hover:bg-amber-500/20":"bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20"}`,title:e.isActive?"Nonaktifkan":"Aktifkan",children:(0,t.jsx)("i",{className:`fa-solid ${r?"fa-circle-notch animate-spin":e.isActive?"fa-eye-slash":"fa-eye"}`})}),(0,t.jsx)("button",{onClick:()=>D(e),disabled:r,className:"text-xs font-semibold py-2 px-2.5 bg-red-500/10 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors disabled:opacity-50",title:"Hapus paket",children:(0,t.jsx)("i",{className:`fa-solid ${r?"fa-circle-notch animate-spin":"fa-trash"}`})})]})]})]},e.id)})}),!m&&U>1&&(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 pt-2",children:[(0,t.jsx)("button",{onClick:()=>$(1),disabled:1===A,className:"w-9 h-9 flex items-center justify-center rounded-lg bg-[#0d0f17] border border-white/10 text-neutral-400 hover:text-white hover:border-white/20 transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:(0,t.jsx)("i",{className:"fa-solid fa-angles-left text-xs"})}),(0,t.jsx)("button",{onClick:()=>$(e=>Math.max(1,e-1)),disabled:1===A,className:"w-9 h-9 flex items-center justify-center rounded-lg bg-[#0d0f17] border border-white/10 text-neutral-400 hover:text-white hover:border-white/20 transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:(0,t.jsx)("i",{className:"fa-solid fa-angle-left text-xs"})}),Array.from({length:U},(e,t)=>t+1).filter(e=>1===e||e===U||1>=Math.abs(e-A)).reduce((e,t,a,s)=>(a>0&&t-s[a-1]>1&&e.push("..."),e.push(t),e),[]).map((e,a)=>"..."===e?(0,t.jsx)("span",{className:"text-neutral-600 px-1",children:"…"},`ellipsis-${a}`):(0,t.jsx)("button",{onClick:()=>$(e),className:`w-9 h-9 flex items-center justify-center rounded-lg text-sm font-semibold transition-all ${A===e?"bg-blue-500 text-neutral-950":"bg-[#0d0f17] border border-white/10 text-neutral-400 hover:text-white hover:border-white/20"}`,children:e},e)),(0,t.jsx)("button",{onClick:()=>$(e=>Math.min(U,e+1)),disabled:A===U,className:"w-9 h-9 flex items-center justify-center rounded-lg bg-[#0d0f17] border border-white/10 text-neutral-400 hover:text-white hover:border-white/20 transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:(0,t.jsx)("i",{className:"fa-solid fa-angle-right text-xs"})}),(0,t.jsx)("button",{onClick:()=>$(U),disabled:A===U,className:"w-9 h-9 flex items-center justify-center rounded-lg bg-[#0d0f17] border border-white/10 text-neutral-400 hover:text-white hover:border-white/20 transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:(0,t.jsx)("i",{className:"fa-solid fa-angles-right text-xs"})})]})]})}e.s(["default",()=>m],64842)}]);