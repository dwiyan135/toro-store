(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10259,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(95187);let l=(0,s.createServerReference)("4025fd0bf5d8db3ddbd01d6012244b6fce0a3f9499",s.callServer,void 0,s.findSourceMapURL,"createPackage");var r=e.i(18566),i=e.i(70319);function n(e){return e.replace(/\D/g,"")}function o(){let e,s=(0,r.useRouter)(),o=(0,t.useRef)(null),[c,d]=(0,t.useState)(""),[u,x]=(0,t.useState)(""),[m,b]=(0,t.useState)(""),[p,h]=(0,t.useState)(""),[f,g]=(0,t.useState)(""),[j,N]=(0,t.useState)(0),[v,k]=(0,t.useState)(!0),[y,w]=(0,t.useState)(""),[S,P]=(0,t.useState)(""),[C,R]=(0,t.useState)(!1),[F,T]=(0,t.useState)(!1),D=function(e){let a=e.replace(/\D/g,"");if(!a)return"";let t=parseInt(a,10);return isNaN(t)?"":"Rp "+t.toLocaleString("id-ID")}(m),U=parseInt(f||"0",10),B=async e=>{let a=e.target.files?.[0];if(!a)return;P(URL.createObjectURL(a)),R(!0);let t=new FormData;t.append("file",a);try{let e=await fetch("/api/upload",{method:"POST",body:t}),a=await e.json();a.success&&a.url?(w(a.url),i.toast.success("Gambar berhasil diupload!")):i.toast.error(a.error||"Upload gagal")}catch{i.toast.error("Upload gagal. Coba lagi.")}finally{R(!1)}},L=async e=>{if(e.preventDefault(),!c.trim())return void i.toast.error("Nama paket wajib diisi.");if(!m)return void i.toast.error("Harga wajib diisi.");if(!p)return void i.toast.error("Kategori wajib dipilih.");T(!0);let a=await l({name:c.trim(),description:u.trim()||void 0,price:D,category:p,imageUrl:y||void 0,stock:U,isActive:v,sortOrder:j});a.success?(i.toast.success("Paket berhasil ditambahkan!"),setTimeout(()=>s.push("/admin/packages"),800)):(i.toast.error(a.error||"Gagal membuat paket."),T(!1))};return(0,a.jsxs)("div",{className:"max-w-2xl",children:[(0,a.jsxs)("header",{className:"mb-8 border-b border-neutral-800 pb-5",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Tambah Paket Baru"}),(0,a.jsx)("p",{className:"text-neutral-400 mt-1",children:"Isi detail paket yang akan ditampilkan di halaman utama."})]}),(0,a.jsxs)("form",{onSubmit:L,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-neutral-300",children:"Gambar Paket"}),(0,a.jsxs)("div",{className:"relative h-48 bg-neutral-900 border-2 border-dashed border-neutral-700 hover:border-blue-500/50 rounded-xl cursor-pointer transition-colors overflow-hidden",onClick:()=>o.current?.click(),children:[S?(0,a.jsx)("img",{src:S,alt:"preview",className:"w-full h-full object-cover"}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full gap-2 text-neutral-500",children:[(0,a.jsx)("i",{className:"fa-solid fa-cloud-arrow-up text-3xl"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Klik untuk upload gambar"}),(0,a.jsx)("span",{className:"text-xs",children:"JPG, PNG, WebP — maks. 10MB"})]}),C&&(0,a.jsxs)("div",{className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center gap-2",children:[(0,a.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full"}),(0,a.jsx)("span",{className:"text-xs text-neutral-400",children:"Mengupload & konversi ke WebP..."})]}),y&&!C&&(0,a.jsxs)("div",{className:"absolute bottom-2 left-2 right-2 flex items-center gap-1.5 bg-emerald-500/20 border border-emerald-500/30 px-2.5 py-1.5 rounded-lg",children:[(0,a.jsx)("i",{className:"fa-solid fa-check text-emerald-400 text-xs"}),(0,a.jsx)("span",{className:"text-xs text-emerald-400 font-medium",children:"Gambar berhasil diupload (WebP)"}),(0,a.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),w(""),P("")},className:"ml-auto text-neutral-500 hover:text-red-400 transition-colors text-xs",children:(0,a.jsx)("i",{className:"fa-solid fa-xmark"})})]})]}),(0,a.jsx)("input",{ref:o,type:"file",accept:"image/*",className:"hidden",onChange:B})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold text-neutral-300",children:["Nama Paket ",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"cth: Basic Gift Skin Lylia",className:"w-full bg-neutral-900 border border-neutral-700 rounded-xl px-4 py-3 text-white placeholder:text-neutral-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all outline-none"})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold text-neutral-300",children:["Kategori ",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{value:p,onChange:e=>h(e.target.value),className:"w-full bg-neutral-900 border border-neutral-700 rounded-xl px-4 py-3 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all outline-none appearance-none cursor-pointer",children:[(0,a.jsx)("option",{value:"",children:"Pilih Kategori..."}),(0,a.jsx)("option",{value:"Basic",children:"Basic"}),(0,a.jsx)("option",{value:"Premium",children:"Premium"}),(0,a.jsx)("option",{value:"Special",children:"Special"}),(0,a.jsx)("option",{value:"Event",children:"Event"}),(0,a.jsx)("option",{value:"Limited",children:"Limited"})]}),(0,a.jsx)("i",{className:"fa-solid fa-chevron-down absolute right-4 top-1/2 -translate-y-1/2 text-neutral-500 text-xs pointer-events-none"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-neutral-300",children:"Deskripsi"}),(0,a.jsx)("textarea",{value:u,onChange:e=>x(e.target.value),placeholder:"Deskripsi singkat tentang isi paket ini...",rows:3,className:"w-full bg-neutral-900 border border-neutral-700 rounded-xl px-4 py-3 text-white placeholder:text-neutral-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all outline-none resize-none"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold text-neutral-300",children:["Harga ",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-neutral-500 font-semibold text-sm select-none",children:"Rp"}),(0,a.jsx)("input",{type:"text",inputMode:"numeric",value:m?parseInt(m,10).toLocaleString("id-ID"):"",onChange:e=>{b(n(e.target.value))},placeholder:"0",className:"w-full bg-neutral-900 border border-neutral-700 rounded-xl pl-10 pr-4 py-3 text-white font-mono text-lg placeholder:text-neutral-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all outline-none"})]}),m?(0,a.jsxs)("p",{className:"text-xs text-amber-400 flex items-center gap-1",children:[(0,a.jsx)("i",{className:"fa-solid fa-tag"}),(e=parseInt(m||"0",10))?e>=1e12?`${(e/1e12).toFixed(2).replace(".",",")} Triliun`:e>=1e9?`${(e/1e9).toFixed(2).replace(".",",")} Miliar`:e>=1e6?`${(e/1e6).toFixed(2).replace(".",",")} Juta`:e>=1e3?`${(e/1e3).toFixed(0)} Ribu`:e.toString():""," · disimpan sebagai ",(0,a.jsx)("span",{className:"font-mono",children:D})]}):(0,a.jsx)("p",{className:"text-xs text-neutral-600",children:"Ketik angka, format otomatis  — cth: 50000"})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-neutral-300",children:"Stok"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-neutral-500 text-sm select-none",children:(0,a.jsx)("i",{className:"fa-solid fa-boxes-stacked"})}),(0,a.jsx)("input",{type:"text",inputMode:"numeric",value:f,onChange:e=>{g(n(e.target.value))},placeholder:"0",className:"w-full bg-neutral-900 border border-neutral-700 rounded-xl pl-10 pr-4 py-3 text-white font-mono text-lg placeholder:text-neutral-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all outline-none"})]}),(0,a.jsx)("p",{className:`text-xs flex items-center gap-1 ${0===U?"text-neutral-600":U<=5?"text-amber-400":"text-emerald-400"}`,children:0===U?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("i",{className:"fa-solid fa-ban"})," Stok 0 — tidak bisa diorder"]}):U<=5?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("i",{className:"fa-solid fa-triangle-exclamation"})," Hampir habis — ",U," unit tersisa"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("i",{className:"fa-solid fa-check"})," ",U," unit tersedia"]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-neutral-300",children:"Urutan Tampil"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>N(Math.max(0,j-1)),className:"w-10 h-12 flex items-center justify-center bg-neutral-800 hover:bg-neutral-700 rounded-xl border border-neutral-700 text-neutral-300 transition-colors shrink-0",children:(0,a.jsx)("i",{className:"fa-solid fa-minus text-xs"})}),(0,a.jsx)("div",{className:"flex-1 bg-neutral-900 border border-neutral-700 rounded-xl px-3 py-3 text-center font-mono text-white text-lg font-bold",children:j}),(0,a.jsx)("button",{type:"button",onClick:()=>N(j+1),className:"w-10 h-12 flex items-center justify-center bg-neutral-800 hover:bg-neutral-700 rounded-xl border border-neutral-700 text-neutral-300 transition-colors shrink-0",children:(0,a.jsx)("i",{className:"fa-solid fa-plus text-xs"})})]}),(0,a.jsx)("p",{className:"text-xs text-neutral-600",children:"Angka kecil muncul lebih dulu"})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-neutral-300",children:"Status Paket"}),(0,a.jsxs)("button",{type:"button",onClick:()=>k(!v),className:`w-full h-12 rounded-xl font-semibold text-sm transition-all border flex items-center justify-center gap-2 ${v?"bg-emerald-500/10 text-emerald-400 border-emerald-500/30 hover:bg-emerald-500/20":"bg-neutral-800 text-neutral-400 border-neutral-700 hover:bg-neutral-700"}`,children:[(0,a.jsx)("i",{className:`fa-solid ${v?"fa-eye":"fa-eye-slash"}`}),v?"Aktif — Tampil di publik":"Nonaktif — Disembunyikan"]}),(0,a.jsx)("p",{className:"text-xs text-neutral-600",children:v?"Pelanggan bisa melihat dan memesan paket ini.":"Paket tidak tampil di halaman utama."})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-2 border-t border-neutral-800",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>s.back(),className:"px-6 py-3 rounded-xl bg-neutral-800 hover:bg-neutral-700 font-semibold transition-colors text-sm",children:[(0,a.jsx)("i",{className:"fa-solid fa-arrow-left mr-2 text-xs"})," Batal"]}),(0,a.jsx)("button",{type:"submit",disabled:F||C,className:"flex-1 py-3 px-6 bg-blue-500 hover:bg-blue-400 text-neutral-950 font-bold rounded-xl transition-all disabled:opacity-50 shadow-lg shadow-blue-500/20 text-sm",children:F?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("i",{className:"fa-solid fa-circle-notch animate-spin mr-2"}),"Menyimpan..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("i",{className:"fa-solid fa-floppy-disk mr-2"}),"Simpan Paket"]})})]})]})]})}e.s(["default",()=>o],10259)}]);