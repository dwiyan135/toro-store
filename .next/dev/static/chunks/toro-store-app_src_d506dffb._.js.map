{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dwiya/.gemini/antigravity/scratch/toro-store-app/src/actions/stock.ts"],"sourcesContent":["'use server';\r\n\r\nimport { prisma } from '@/lib/prisma';\r\nimport { revalidatePath } from 'next/cache';\r\n\r\nexport async function getStock() {\r\n  try {\r\n    const stock = await prisma.stockSetting.findFirst();\r\n    if (!stock) {\r\n      // Return defaults if none exists\r\n      return { basicStock: 0, premiumStock: 0, specialStock: 0 };\r\n    }\r\n    return stock;\r\n  } catch (error) {\r\n    console.error(\"Failed to fetch stock:\", error);\r\n    return { basicStock: 0, premiumStock: 0, specialStock: 0 };\r\n  }\r\n}\r\n\r\nexport async function updateStock(basic: number, premium: number, special: number) {\r\n  try {\r\n    const existing = await prisma.stockSetting.findFirst();\r\n    if (existing) {\r\n      await prisma.stockSetting.update({\r\n        where: { id: existing.id },\r\n        data: {\r\n          basicStock: basic,\r\n          premiumStock: premium,\r\n          specialStock: special,\r\n        }\r\n      });\r\n    } else {\r\n      await prisma.stockSetting.create({\r\n        data: {\r\n          basicStock: basic,\r\n          premiumStock: premium,\r\n          specialStock: special,\r\n        }\r\n      });\r\n    }\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/stock');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error(\"Failed to update stock:\", error);\r\n    return { success: false, error: \"Gagal mengupdate stok.\" };\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAKsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,4CAAA"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dwiya/.gemini/antigravity/scratch/toro-store-app/src/actions/stock.ts"],"sourcesContent":["'use server';\r\n\r\nimport { prisma } from '@/lib/prisma';\r\nimport { revalidatePath } from 'next/cache';\r\n\r\nexport async function getStock() {\r\n  try {\r\n    const stock = await prisma.stockSetting.findFirst();\r\n    if (!stock) {\r\n      // Return defaults if none exists\r\n      return { basicStock: 0, premiumStock: 0, specialStock: 0 };\r\n    }\r\n    return stock;\r\n  } catch (error) {\r\n    console.error(\"Failed to fetch stock:\", error);\r\n    return { basicStock: 0, premiumStock: 0, specialStock: 0 };\r\n  }\r\n}\r\n\r\nexport async function updateStock(basic: number, premium: number, special: number) {\r\n  try {\r\n    const existing = await prisma.stockSetting.findFirst();\r\n    if (existing) {\r\n      await prisma.stockSetting.update({\r\n        where: { id: existing.id },\r\n        data: {\r\n          basicStock: basic,\r\n          premiumStock: premium,\r\n          specialStock: special,\r\n        }\r\n      });\r\n    } else {\r\n      await prisma.stockSetting.create({\r\n        data: {\r\n          basicStock: basic,\r\n          premiumStock: premium,\r\n          specialStock: special,\r\n        }\r\n      });\r\n    }\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/stock');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error(\"Failed to update stock:\", error);\r\n    return { success: false, error: \"Gagal mengupdate stok.\" };\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAmBsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,+CAAA"}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dwiya/.gemini/antigravity/scratch/toro-store-app/src/app/admin/stock/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { getStock, updateStock } from '@/actions/stock';\r\n\r\nexport default function StockManagePage() {\r\n  const [basic, setBasic] = useState(0);\r\n  const [premium, setPremium] = useState(0);\r\n  const [special, setSpecial] = useState(0);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    getStock().then(data => {\r\n      setBasic(data.basicStock);\r\n      setPremium(data.premiumStock);\r\n      setSpecial(data.specialStock);\r\n      setIsLoading(false);\r\n    });\r\n  }, []);\r\n\r\n  const handleSave = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setIsSaving(true);\r\n    setMessage('');\r\n    \r\n    const res = await updateStock(basic, premium, special);\r\n    if (res.success) {\r\n      setMessage('Stok berhasil diperbarui!');\r\n    } else {\r\n      setMessage(res.error || 'Gagal menyimpan stok');\r\n    }\r\n    setIsSaving(false);\r\n    \r\n    // Clear message after 3 seconds\r\n    setTimeout(() => setMessage(''), 3000);\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <div className=\"animate-pulse\">Memuat data stok...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-2xl animate-in slide-in-from-bottom-4 duration-500\">\r\n      <h1 className=\"text-3xl font-bold mb-2\">Manajemen Stok</h1>\r\n      <p className=\"text-neutral-400 mb-8\">Ubah ketersediaan stok paket gift skin.</p>\r\n\r\n      {message && (\r\n        <div className={`p-4 rounded-md mb-6 ${message.includes('berhasil') ? 'bg-emerald-500/10 text-emerald-400 border border-emerald-500/20' : 'bg-red-500/10 text-red-400 border border-red-500/20'}`}>\r\n          {message}\r\n        </div>\r\n      )}\r\n\r\n      <form onSubmit={handleSave} className=\"space-y-6 bg-neutral-900 border border-neutral-800 p-6 sm:p-8 rounded-xl shadow-xl\">\r\n        \r\n        <div className=\"space-y-2\">\r\n          <label className=\"block text-sm font-medium text-neutral-300\">Basic Gift Stock</label>\r\n          <input \r\n            type=\"number\" \r\n            min=\"0\"\r\n            value={basic}\r\n            onChange={(e) => setBasic(parseInt(e.target.value) || 0)}\r\n            className=\"w-full bg-neutral-950 border border-neutral-800 rounded-lg p-3.5 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all font-mono\"\r\n          />\r\n          <p className=\"text-xs text-neutral-500\">Stok untuk Skin Normal - Epic Shop</p>\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <label className=\"block text-sm font-medium text-neutral-300\">Premium Gift Stock</label>\r\n          <input \r\n            type=\"number\" \r\n            min=\"0\"\r\n            value={premium}\r\n            onChange={(e) => setPremium(parseInt(e.target.value) || 0)}\r\n            className=\"w-full bg-neutral-950 border border-neutral-800 rounded-lg p-3.5 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all font-mono\"\r\n          />\r\n          <p className=\"text-xs text-neutral-500\">Stok untuk Skin Collector / Limited</p>\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <label className=\"block text-sm font-medium text-neutral-300\">Special / Event Pass Stock</label>\r\n          <input \r\n            type=\"number\" \r\n            min=\"0\"\r\n            value={special}\r\n            onChange={(e) => setSpecial(parseInt(e.target.value) || 0)}\r\n            className=\"w-full bg-neutral-950 border border-neutral-800 rounded-lg p-3.5 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all font-mono\"\r\n          />\r\n          <p className=\"text-xs text-neutral-500\">Stok untuk Covenant Pass, Starlight, dll</p>\r\n        </div>\r\n\r\n        <div className=\"pt-6 border-t border-neutral-800\">\r\n          <button \r\n            type=\"submit\" \r\n            disabled={isSaving}\r\n            className=\"w-full bg-blue-500 hover:bg-blue-400 text-neutral-950 font-bold py-3.5 px-4 rounded-xl transition-all shadow-lg shadow-blue-500/20 disabled:opacity-50\"\r\n          >\r\n            {isSaving ? 'Menyimpan...' : 'Simpan Perubahan'}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;qCAAC;YACR,IAAA,6LAAQ,IAAG,IAAI;6CAAC,CAAA;oBACd,SAAS,KAAK,UAAU;oBACxB,WAAW,KAAK,YAAY;oBAC5B,WAAW,KAAK,YAAY;oBAC5B,aAAa;gBACf;;QACF;oCAAG,EAAE;IAEL,MAAM,aAAa,OAAO;QACxB,EAAE,cAAc;QAChB,YAAY;QACZ,WAAW;QAEX,MAAM,MAAM,MAAM,IAAA,gMAAW,EAAC,OAAO,SAAS;QAC9C,IAAI,IAAI,OAAO,EAAE;YACf,WAAW;QACb,OAAO;YACL,WAAW,IAAI,KAAK,IAAI;QAC1B;QACA,YAAY;QAEZ,gCAAgC;QAChC,WAAW,IAAM,WAAW,KAAK;IACnC;IAEA,IAAI,WAAW;QACb,qBAAO,6LAAC;YAAI,WAAU;sBAAgB;;;;;;IACxC;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA0B;;;;;;0BACxC,6LAAC;gBAAE,WAAU;0BAAwB;;;;;;YAEpC,yBACC,6LAAC;gBAAI,WAAW,CAAC,oBAAoB,EAAE,QAAQ,QAAQ,CAAC,cAAc,oEAAoE,uDAAuD;0BAC9L;;;;;;0BAIL,6LAAC;gBAAK,UAAU;gBAAY,WAAU;;kCAEpC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;0CAA6C;;;;;;0CAC9D,6LAAC;gCACC,MAAK;gCACL,KAAI;gCACJ,OAAO;gCACP,UAAU,CAAC,IAAM,SAAS,SAAS,EAAE,MAAM,CAAC,KAAK,KAAK;gCACtD,WAAU;;;;;;0CAEZ,6LAAC;gCAAE,WAAU;0CAA2B;;;;;;;;;;;;kCAG1C,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;0CAA6C;;;;;;0CAC9D,6LAAC;gCACC,MAAK;gCACL,KAAI;gCACJ,OAAO;gCACP,UAAU,CAAC,IAAM,WAAW,SAAS,EAAE,MAAM,CAAC,KAAK,KAAK;gCACxD,WAAU;;;;;;0CAEZ,6LAAC;gCAAE,WAAU;0CAA2B;;;;;;;;;;;;kCAG1C,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;0CAA6C;;;;;;0CAC9D,6LAAC;gCACC,MAAK;gCACL,KAAI;gCACJ,OAAO;gCACP,UAAU,CAAC,IAAM,WAAW,SAAS,EAAE,MAAM,CAAC,KAAK,KAAK;gCACxD,WAAU;;;;;;0CAEZ,6LAAC;gCAAE,WAAU;0CAA2B;;;;;;;;;;;;kCAG1C,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BACC,MAAK;4BACL,UAAU;4BACV,WAAU;sCAET,WAAW,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;AAMzC;GAnGwB;KAAA"}}]
}