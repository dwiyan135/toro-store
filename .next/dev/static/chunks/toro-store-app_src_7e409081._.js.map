{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dwiya/.gemini/antigravity/scratch/toro-store-app/src/actions/package.ts"],"sourcesContent":["'use server';\r\n\r\nimport { prisma } from '@/lib/prisma';\r\nimport { revalidatePath } from 'next/cache';\r\nimport { writeFile, mkdir } from 'fs/promises';\r\nimport { existsSync } from 'fs';\r\nimport path from 'path';\r\nimport sharp from 'sharp';\r\n\r\nfunction getPublicDir(): string {\r\n  const subDirCandidate = path.join(process.cwd(), 'toro-store-app', 'public');\r\n  if (existsSync(subDirCandidate)) return subDirCandidate;\r\n  return path.join(process.cwd(), 'public');\r\n}\r\n\r\nexport async function getPackages() {\r\n  try {\r\n    return await prisma.package.findMany({\r\n      where: { isActive: true },\r\n      orderBy: [{ sortOrder: 'asc' }, { createdAt: 'asc' }],\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch packages:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getAdminPackages() {\r\n  try {\r\n    return await prisma.package.findMany({\r\n      orderBy: [{ sortOrder: 'asc' }, { createdAt: 'asc' }],\r\n      include: { _count: { select: { orders: true } } },\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch admin packages:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getPackageById(id: string) {\r\n  try {\r\n    return await prisma.package.findUnique({ where: { id } });\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function createPackage(data: {\r\n  name: string;\r\n  description?: string;\r\n  price: string;\r\n  category: string;\r\n  imageUrl?: string;\r\n  stock: number;\r\n  isActive: boolean;\r\n  sortOrder: number;\r\n}) {\r\n  try {\r\n    await prisma.package.create({ data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to create package:', error);\r\n    return { success: false, error: 'Gagal membuat paket.' };\r\n  }\r\n}\r\n\r\nexport async function updatePackage(\r\n  id: string,\r\n  data: {\r\n    name?: string;\r\n    description?: string;\r\n    price?: string;\r\n    category?: string;\r\n    imageUrl?: string;\r\n    stock?: number;\r\n    isActive?: boolean;\r\n    sortOrder?: number;\r\n  }\r\n) {\r\n  try {\r\n    await prisma.package.update({ where: { id }, data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to update package:', error);\r\n    return { success: false, error: 'Gagal mengupdate paket.' };\r\n  }\r\n}\r\n\r\nexport async function deletePackage(id: string) {\r\n  try {\r\n    await prisma.package.delete({ where: { id } });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to delete package:', error);\r\n    return { success: false, error: 'Gagal menghapus paket. Mungkin masih ada order terkait.' };\r\n  }\r\n}\r\n\r\nexport async function uploadPackageImage(formData: FormData): Promise<{ success: boolean; url?: string; error?: string }> {\r\n  try {\r\n    const file = formData.get('file') as File;\r\n    if (!file || file.size === 0) return { success: false, error: 'File tidak ditemukan.' };\r\n\r\n    const allowed = ['image/jpeg', 'image/png', 'image/webp', 'image/gif', 'image/avif'];\r\n    if (!allowed.includes(file.type)) return { success: false, error: 'Format tidak didukung. Gunakan JPG, PNG, atau WebP.' };\r\n\r\n    if (file.size > 10 * 1024 * 1024) return { success: false, error: 'Ukuran file maksimal 10MB.' };\r\n\r\n    const inputBuffer = Buffer.from(await file.arrayBuffer());\r\n    const webpBuffer = await sharp(inputBuffer)\r\n      .resize(1200, 900, { fit: 'inside', withoutEnlargement: true })\r\n      .webp({ quality: 82 })\r\n      .toBuffer();\r\n\r\n    const filename = `pkg_${Date.now()}.webp`;\r\n    const uploadDir = path.join(getPublicDir(), 'uploads');\r\n    await mkdir(uploadDir, { recursive: true });\r\n    await writeFile(path.join(uploadDir, filename), webpBuffer);\r\n\r\n    return { success: true, url: `/uploads/${filename}` };\r\n  } catch (error) {\r\n    console.error('Upload failed:', error);\r\n    return { success: false, error: 'Upload gagal.' };\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAuCsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,kDAAA"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dwiya/.gemini/antigravity/scratch/toro-store-app/src/actions/package.ts"],"sourcesContent":["'use server';\r\n\r\nimport { prisma } from '@/lib/prisma';\r\nimport { revalidatePath } from 'next/cache';\r\nimport { writeFile, mkdir } from 'fs/promises';\r\nimport { existsSync } from 'fs';\r\nimport path from 'path';\r\nimport sharp from 'sharp';\r\n\r\nfunction getPublicDir(): string {\r\n  const subDirCandidate = path.join(process.cwd(), 'toro-store-app', 'public');\r\n  if (existsSync(subDirCandidate)) return subDirCandidate;\r\n  return path.join(process.cwd(), 'public');\r\n}\r\n\r\nexport async function getPackages() {\r\n  try {\r\n    return await prisma.package.findMany({\r\n      where: { isActive: true },\r\n      orderBy: [{ sortOrder: 'asc' }, { createdAt: 'asc' }],\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch packages:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getAdminPackages() {\r\n  try {\r\n    return await prisma.package.findMany({\r\n      orderBy: [{ sortOrder: 'asc' }, { createdAt: 'asc' }],\r\n      include: { _count: { select: { orders: true } } },\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch admin packages:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getPackageById(id: string) {\r\n  try {\r\n    return await prisma.package.findUnique({ where: { id } });\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function createPackage(data: {\r\n  name: string;\r\n  description?: string;\r\n  price: string;\r\n  category: string;\r\n  imageUrl?: string;\r\n  stock: number;\r\n  isActive: boolean;\r\n  sortOrder: number;\r\n}) {\r\n  try {\r\n    await prisma.package.create({ data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to create package:', error);\r\n    return { success: false, error: 'Gagal membuat paket.' };\r\n  }\r\n}\r\n\r\nexport async function updatePackage(\r\n  id: string,\r\n  data: {\r\n    name?: string;\r\n    description?: string;\r\n    price?: string;\r\n    category?: string;\r\n    imageUrl?: string;\r\n    stock?: number;\r\n    isActive?: boolean;\r\n    sortOrder?: number;\r\n  }\r\n) {\r\n  try {\r\n    await prisma.package.update({ where: { id }, data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to update package:', error);\r\n    return { success: false, error: 'Gagal mengupdate paket.' };\r\n  }\r\n}\r\n\r\nexport async function deletePackage(id: string) {\r\n  try {\r\n    await prisma.package.delete({ where: { id } });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to delete package:', error);\r\n    return { success: false, error: 'Gagal menghapus paket. Mungkin masih ada order terkait.' };\r\n  }\r\n}\r\n\r\nexport async function uploadPackageImage(formData: FormData): Promise<{ success: boolean; url?: string; error?: string }> {\r\n  try {\r\n    const file = formData.get('file') as File;\r\n    if (!file || file.size === 0) return { success: false, error: 'File tidak ditemukan.' };\r\n\r\n    const allowed = ['image/jpeg', 'image/png', 'image/webp', 'image/gif', 'image/avif'];\r\n    if (!allowed.includes(file.type)) return { success: false, error: 'Format tidak didukung. Gunakan JPG, PNG, atau WebP.' };\r\n\r\n    if (file.size > 10 * 1024 * 1024) return { success: false, error: 'Ukuran file maksimal 10MB.' };\r\n\r\n    const inputBuffer = Buffer.from(await file.arrayBuffer());\r\n    const webpBuffer = await sharp(inputBuffer)\r\n      .resize(1200, 900, { fit: 'inside', withoutEnlargement: true })\r\n      .webp({ quality: 82 })\r\n      .toBuffer();\r\n\r\n    const filename = `pkg_${Date.now()}.webp`;\r\n    const uploadDir = path.join(getPublicDir(), 'uploads');\r\n    await mkdir(uploadDir, { recursive: true });\r\n    await writeFile(path.join(uploadDir, filename), webpBuffer);\r\n\r\n    return { success: true, url: `/uploads/${filename}` };\r\n  } catch (error) {\r\n    console.error('Upload failed:', error);\r\n    return { success: false, error: 'Upload gagal.' };\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAoEsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,iDAAA"}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dwiya/.gemini/antigravity/scratch/toro-store-app/src/app/admin/packages/%5Bid%5D/edit/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useRef, useEffect, use } from 'react';\r\nimport { getPackageById, updatePackage } from '@/actions/package';\r\nimport { useRouter } from 'next/navigation';\r\nimport { toast } from 'react-toastify';\r\n\r\n// --- Utilities ---\r\n\r\n/** Format digit string ke \"Rp 50.000\" */\r\nfunction formatRupiah(digits: string): string {\r\n  if (!digits) return '';\r\n  const num = parseInt(digits, 10);\r\n  if (isNaN(num)) return '';\r\n  return 'Rp ' + num.toLocaleString('id-ID');\r\n}\r\n\r\n/** Ekstrak hanya angka dari string apapun (termasuk \"Rp 50.000\") */\r\nfunction extractDigits(str: string): string {\r\n  return str.replace(/\\D/g, '');\r\n}\r\n\r\n/** Label skala nilai untuk hint */\r\nfunction priceHint(digits: string): string {\r\n  const n = parseInt(digits || '0', 10);\r\n  if (!n) return '';\r\n  if (n >= 1_000_000_000_000) return `${(n / 1_000_000_000_000).toFixed(2).replace('.', ',')} Triliun`;\r\n  if (n >= 1_000_000_000) return `${(n / 1_000_000_000).toFixed(2).replace('.', ',')} Miliar`;\r\n  if (n >= 1_000_000) return `${(n / 1_000_000).toFixed(2).replace('.', ',')} Juta`;\r\n  if (n >= 1_000) return `${(n / 1_000).toFixed(0)} Ribu`;\r\n  return n.toString();\r\n}\r\n\r\n// --- Component ---\r\n\r\nexport default function EditPackagePage({ params }: { params: Promise<{ id: string }> }) {\r\n  const { id } = use(params);\r\n  const router = useRouter();\r\n  const fileRef = useRef<HTMLInputElement>(null);\r\n\r\n  const [name, setName] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [rawPrice, setRawPrice] = useState('');   // digits only\r\n  const [category, setCategory] = useState('');\r\n  const [stockRaw, setStockRaw] = useState('');   // digits only\r\n  const [sortOrder, setSortOrder] = useState(0);\r\n  const [isActive, setIsActive] = useState(true);\r\n  const [imageUrl, setImageUrl] = useState('');\r\n  const [imagePreview, setImagePreview] = useState('');\r\n  const [uploading, setUploading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Derived\r\n  const priceFormatted = formatRupiah(rawPrice);\r\n  const priceToSave    = priceFormatted;\r\n  const stock          = parseInt(stockRaw || '0', 10);\r\n\r\n  useEffect(() => {\r\n    getPackageById(id).then(pkg => {\r\n      if (!pkg) { router.push('/admin/packages'); return; }\r\n      setName(pkg.name);\r\n      setDescription(pkg.description || '');\r\n      // Price may be stored as \"Rp 55.000\" or plain \"55000\" — extract digits\r\n      setRawPrice(extractDigits(pkg.price));\r\n      setCategory(pkg.category);\r\n      setStockRaw(pkg.stock.toString());\r\n      setSortOrder(pkg.sortOrder);\r\n      setIsActive(pkg.isActive);\r\n      setImageUrl(pkg.imageUrl || '');\r\n      setImagePreview(pkg.imageUrl || '');\r\n      setLoading(false);\r\n    }).catch(() => {\r\n      toast.error('Gagal memuat data paket.');\r\n      setLoading(false);\r\n    });\r\n  }, [id, router]);\r\n\r\n  const handlePriceChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setRawPrice(extractDigits(e.target.value));\r\n  };\r\n\r\n  const handleStockChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setStockRaw(extractDigits(e.target.value));\r\n  };\r\n\r\n  const handleImageChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n    const localPreview = URL.createObjectURL(file);\r\n    setImagePreview(localPreview);\r\n    setUploading(true);\r\n    const fd = new FormData();\r\n    fd.append('file', file);\r\n    try {\r\n      const res = await fetch('/api/upload', { method: 'POST', body: fd });\r\n      const data = await res.json();\r\n      if (data.success && data.url) {\r\n        setImageUrl(data.url);\r\n        toast.success('Gambar berhasil diupload!');\r\n      } else {\r\n        toast.error(data.error || 'Upload gagal');\r\n        setImagePreview(imageUrl);\r\n      }\r\n    } catch {\r\n      toast.error('Upload gagal. Coba lagi.');\r\n      setImagePreview(imageUrl);\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!name.trim()) { toast.error('Nama paket wajib diisi.'); return; }\r\n    if (!rawPrice)    { toast.error('Harga wajib diisi.'); return; }\r\n    if (!category)    { toast.error('Kategori wajib dipilih.'); return; }\r\n    setSaving(true);\r\n    const res = await updatePackage(id, {\r\n      name: name.trim(),\r\n      description: description.trim() || undefined,\r\n      price: priceToSave,\r\n      category,\r\n      imageUrl: imageUrl || undefined,\r\n      stock,\r\n      isActive,\r\n      sortOrder,\r\n    });\r\n    if (res.success) {\r\n      toast.success('Perubahan berhasil disimpan!');\r\n      setTimeout(() => router.push('/admin/packages'), 800);\r\n    } else {\r\n      toast.error(res.error || 'Gagal menyimpan paket.');\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return (\r\n    <div className=\"flex items-center justify-center py-24\">\r\n      <div className=\"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full\" />\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"max-w-2xl\">\r\n      <header className=\"mb-8 border-b border-neutral-800 pb-5\">\r\n        <h1 className=\"text-3xl font-bold\">Edit Paket</h1>\r\n        <p className=\"text-neutral-400 mt-1\">Perbarui informasi paket gift skin.</p>\r\n      </header>\r\n\r\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n\r\n        {/* Image Upload */}\r\n        <div className=\"space-y-2\">\r\n          <label className=\"block text-sm font-semibold text-neutral-300\">Gambar Paket</label>\r\n          <div\r\n            className=\"relative h-48 bg-neutral-900 border-2 border-dashed border-neutral-700 hover:border-blue-500/50 rounded-xl cursor-pointer transition-colors overflow-hidden\"\r\n            onClick={() => fileRef.current?.click()}\r\n          >\r\n            {imagePreview ? (\r\n              // eslint-disable-next-line @next/next/no-img-element\r\n              <img src={imagePreview} alt=\"preview\" className=\"w-full h-full object-cover\" />\r\n            ) : (\r\n              <div className=\"flex flex-col items-center justify-center h-full gap-2 text-neutral-500\">\r\n                <i className=\"fa-solid fa-cloud-arrow-up text-3xl\" />\r\n                <span className=\"text-sm font-medium\">Klik untuk ganti gambar</span>\r\n                <span className=\"text-xs\">JPG, PNG, WebP — maks. 10MB</span>\r\n              </div>\r\n            )}\r\n            {uploading && (\r\n              <div className=\"absolute inset-0 bg-black/70 flex flex-col items-center justify-center gap-2\">\r\n                <div className=\"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full\" />\r\n                <span className=\"text-xs text-neutral-400\">Mengupload & konversi ke WebP...</span>\r\n              </div>\r\n            )}\r\n            {imageUrl && !uploading && (\r\n              <div className=\"absolute bottom-2 left-2 right-2 flex items-center gap-1.5 bg-emerald-500/20 border border-emerald-500/30 px-2.5 py-1.5 rounded-lg\">\r\n                <i className=\"fa-solid fa-check text-emerald-400 text-xs\" />\r\n                <span className=\"text-xs text-emerald-400 font-medium\">Gambar sudah diset</span>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={(ev) => { ev.stopPropagation(); setImageUrl(''); setImagePreview(''); }}\r\n                  className=\"ml-auto text-neutral-500 hover:text-red-400 transition-colors text-xs\"\r\n                >\r\n                  <i className=\"fa-solid fa-xmark\" /> Hapus\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n          <input ref={fileRef} type=\"file\" accept=\"image/*\" className=\"hidden\" onChange={handleImageChange} />\r\n        </div>\r\n\r\n        {/* Name & Category */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n          <div className=\"space-y-1.5\">\r\n            <label className=\"block text-sm font-semibold text-neutral-300\">\r\n              Nama Paket <span className=\"text-red-400\">*</span>\r\n            </label>\r\n            <input\r\n              type=\"text\" value={name} onChange={e => setName(e.target.value)}\r\n              className=\"w-full bg-neutral-900 border border-neutral-700 rounded-xl px-4 py-3 text-white placeholder:text-neutral-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all outline-none\"\r\n            />\r\n          </div>\r\n          <div className=\"space-y-1.5\">\r\n            <label className=\"block text-sm font-semibold text-neutral-300\">\r\n              Kategori <span className=\"text-red-400\">*</span>\r\n            </label>\r\n            <div className=\"relative\">\r\n              <select\r\n                value={category} onChange={e => setCategory(e.target.value)}\r\n                className=\"w-full bg-neutral-900 border border-neutral-700 rounded-xl px-4 py-3 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all outline-none appearance-none cursor-pointer\"\r\n              >\r\n                <option value=\"\">Pilih Kategori...</option>\r\n                <option value=\"Basic\">Basic</option>\r\n                <option value=\"Premium\">Premium</option>\r\n                <option value=\"Special\">Special</option>\r\n                <option value=\"Event\">Event</option>\r\n                <option value=\"Limited\">Limited</option>\r\n              </select>\r\n              <i className=\"fa-solid fa-chevron-down absolute right-4 top-1/2 -translate-y-1/2 text-neutral-500 text-xs pointer-events-none\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Description */}\r\n        <div className=\"space-y-1.5\">\r\n          <label className=\"block text-sm font-semibold text-neutral-300\">Deskripsi</label>\r\n          <textarea\r\n            value={description} onChange={e => setDescription(e.target.value)}\r\n            rows={3}\r\n            className=\"w-full bg-neutral-900 border border-neutral-700 rounded-xl px-4 py-3 text-white placeholder:text-neutral-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all outline-none resize-none\"\r\n          />\r\n        </div>\r\n\r\n        {/* Price & Stock */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n\r\n          {/* PRICE */}\r\n          <div className=\"space-y-1.5\">\r\n            <label className=\"block text-sm font-semibold text-neutral-300\">\r\n              Harga <span className=\"text-red-400\">*</span>\r\n            </label>\r\n            <div className=\"relative\">\r\n              <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-neutral-500 font-semibold text-sm select-none\">Rp</span>\r\n              <input\r\n                type=\"text\"\r\n                inputMode=\"numeric\"\r\n                value={rawPrice ? parseInt(rawPrice, 10).toLocaleString('id-ID') : ''}\r\n                onChange={handlePriceChange}\r\n                placeholder=\"0\"\r\n                className=\"w-full bg-neutral-900 border border-neutral-700 rounded-xl pl-10 pr-4 py-3 text-white font-mono text-lg placeholder:text-neutral-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all outline-none\"\r\n              />\r\n            </div>\r\n            {rawPrice ? (\r\n              <p className=\"text-xs text-amber-400 flex items-center gap-1\">\r\n                <i className=\"fa-solid fa-tag\" />\r\n                {priceHint(rawPrice)} · disimpan sebagai <span className=\"font-mono\">{priceFormatted}</span>\r\n              </p>\r\n            ) : (\r\n              <p className=\"text-xs text-neutral-600\">Ketik angka saja, format otomatis — cth: 50000</p>\r\n            )}\r\n          </div>\r\n\r\n          {/* STOCK */}\r\n          <div className=\"space-y-1.5\">\r\n            <label className=\"block text-sm font-semibold text-neutral-300\">Stok</label>\r\n            <div className=\"relative\">\r\n              <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-neutral-500 text-sm select-none\">\r\n                <i className=\"fa-solid fa-boxes-stacked\" />\r\n              </span>\r\n              <input\r\n                type=\"text\"\r\n                inputMode=\"numeric\"\r\n                value={stockRaw}\r\n                onChange={handleStockChange}\r\n                placeholder=\"0\"\r\n                className=\"w-full bg-neutral-900 border border-neutral-700 rounded-xl pl-10 pr-4 py-3 text-white font-mono text-lg placeholder:text-neutral-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all outline-none\"\r\n              />\r\n            </div>\r\n            <p className={`text-xs flex items-center gap-1 ${stock === 0 ? 'text-neutral-600' : stock <= 5 ? 'text-amber-400' : 'text-emerald-400'}`}>\r\n              {stock === 0\r\n                ? <><i className=\"fa-solid fa-ban\" /> Stok 0 — tidak bisa diorder</>\r\n                : stock <= 5\r\n                ? <><i className=\"fa-solid fa-triangle-exclamation\" /> Hampir habis — {stock} unit tersisa</>\r\n                : <><i className=\"fa-solid fa-check\" /> {stock} unit tersedia</>\r\n              }\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Sort Order & Active */}\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <div className=\"space-y-1.5\">\r\n            <label className=\"block text-sm font-semibold text-neutral-300\">Urutan Tampil</label>\r\n            <div className=\"flex items-center gap-2\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setSortOrder(Math.max(0, sortOrder - 1))}\r\n                className=\"w-10 h-12 flex items-center justify-center bg-neutral-800 hover:bg-neutral-700 rounded-xl border border-neutral-700 text-neutral-300 transition-colors shrink-0\"\r\n              >\r\n                <i className=\"fa-solid fa-minus text-xs\" />\r\n              </button>\r\n              <div className=\"flex-1 bg-neutral-900 border border-neutral-700 rounded-xl px-3 py-3 text-center font-mono text-white text-lg font-bold\">\r\n                {sortOrder}\r\n              </div>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setSortOrder(sortOrder + 1)}\r\n                className=\"w-10 h-12 flex items-center justify-center bg-neutral-800 hover:bg-neutral-700 rounded-xl border border-neutral-700 text-neutral-300 transition-colors shrink-0\"\r\n              >\r\n                <i className=\"fa-solid fa-plus text-xs\" />\r\n              </button>\r\n            </div>\r\n            <p className=\"text-xs text-neutral-600\">Angka kecil muncul lebih dulu</p>\r\n          </div>\r\n\r\n          <div className=\"space-y-1.5\">\r\n            <label className=\"block text-sm font-semibold text-neutral-300\">Status Paket</label>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setIsActive(!isActive)}\r\n              className={`w-full h-12 rounded-xl font-semibold text-sm transition-all border flex items-center justify-center gap-2 ${\r\n                isActive\r\n                  ? 'bg-emerald-500/10 text-emerald-400 border-emerald-500/30 hover:bg-emerald-500/20'\r\n                  : 'bg-neutral-800 text-neutral-400 border-neutral-700 hover:bg-neutral-700'\r\n              }`}\r\n            >\r\n              <i className={`fa-solid ${isActive ? 'fa-eye' : 'fa-eye-slash'}`} />\r\n              {isActive ? 'Aktif — Tampil di publik' : 'Nonaktif — Disembunyikan'}\r\n            </button>\r\n            <p className=\"text-xs text-neutral-600\">\r\n              {isActive ? 'Pelanggan bisa melihat dan memesan paket ini.' : 'Paket tidak tampil di halaman utama.'}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Submit */}\r\n        <div className=\"flex gap-3 pt-2 border-t border-neutral-800\">\r\n          <button\r\n            type=\"button\" onClick={() => router.back()}\r\n            className=\"px-6 py-3 rounded-xl bg-neutral-800 hover:bg-neutral-700 font-semibold transition-colors text-sm\"\r\n          >\r\n            <i className=\"fa-solid fa-arrow-left mr-2 text-xs\" /> Batal\r\n          </button>\r\n          <button\r\n            type=\"submit\" disabled={saving || uploading}\r\n            className=\"flex-1 py-3 px-6 bg-blue-500 hover:bg-blue-400 text-neutral-950 font-bold rounded-xl transition-all disabled:opacity-50 shadow-lg shadow-blue-500/20 text-sm\"\r\n          >\r\n            {saving\r\n              ? <><i className=\"fa-solid fa-circle-notch animate-spin mr-2\" />Menyimpan...</>\r\n              : <><i className=\"fa-solid fa-floppy-disk mr-2\" />Simpan Perubahan</>\r\n            }\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}