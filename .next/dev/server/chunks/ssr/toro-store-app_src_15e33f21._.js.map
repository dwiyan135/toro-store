{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dwiya/.gemini/antigravity/scratch/toro-store-app/src/actions/package.ts"],"sourcesContent":["'use server';\r\n\r\nimport { prisma } from '@/lib/prisma';\r\nimport { revalidatePath } from 'next/cache';\r\nimport { writeFile, mkdir } from 'fs/promises';\r\nimport { existsSync } from 'fs';\r\nimport path from 'path';\r\nimport sharp from 'sharp';\r\n\r\nfunction getPublicDir(): string {\r\n  const subDirCandidate = path.join(process.cwd(), 'toro-store-app', 'public');\r\n  if (existsSync(subDirCandidate)) return subDirCandidate;\r\n  return path.join(process.cwd(), 'public');\r\n}\r\n\r\nexport async function getPackages() {\r\n  try {\r\n    return await prisma.package.findMany({\r\n      where: { isActive: true },\r\n      orderBy: [{ sortOrder: 'asc' }, { createdAt: 'asc' }],\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch packages:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getAdminPackages() {\r\n  try {\r\n    return await prisma.package.findMany({\r\n      orderBy: [{ sortOrder: 'asc' }, { createdAt: 'asc' }],\r\n      include: { _count: { select: { orders: true } } },\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch admin packages:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getPackageById(id: string) {\r\n  try {\r\n    return await prisma.package.findUnique({ where: { id } });\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function createPackage(data: {\r\n  name: string;\r\n  description?: string;\r\n  price: string;\r\n  category: string;\r\n  imageUrl?: string;\r\n  stock: number;\r\n  isActive: boolean;\r\n  sortOrder: number;\r\n}) {\r\n  try {\r\n    await prisma.package.create({ data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to create package:', error);\r\n    return { success: false, error: 'Gagal membuat paket.' };\r\n  }\r\n}\r\n\r\nexport async function updatePackage(\r\n  id: string,\r\n  data: {\r\n    name?: string;\r\n    description?: string;\r\n    price?: string;\r\n    category?: string;\r\n    imageUrl?: string;\r\n    stock?: number;\r\n    isActive?: boolean;\r\n    sortOrder?: number;\r\n  }\r\n) {\r\n  try {\r\n    await prisma.package.update({ where: { id }, data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to update package:', error);\r\n    return { success: false, error: 'Gagal mengupdate paket.' };\r\n  }\r\n}\r\n\r\nexport async function deletePackage(id: string) {\r\n  try {\r\n    // Delete order events first, then orders, then package (cascade)\r\n    const orders = await prisma.order.findMany({ where: { packageId: id }, select: { id: true } });\r\n    const orderIds = orders.map(o => o.id);\r\n    if (orderIds.length > 0) {\r\n      await prisma.orderEvent.deleteMany({ where: { orderId: { in: orderIds } } });\r\n      await prisma.order.deleteMany({ where: { id: { in: orderIds } } });\r\n    }\r\n    await prisma.package.delete({ where: { id } });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    revalidatePath('/admin');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to delete package:', error);\r\n    return { success: false, error: 'Gagal menghapus paket.' };\r\n  }\r\n}\r\n\r\nexport async function bulkDeletePackages(ids: string[]) {\r\n  try {\r\n    const orders = await prisma.order.findMany({ where: { packageId: { in: ids } }, select: { id: true } });\r\n    const orderIds = orders.map(o => o.id);\r\n    if (orderIds.length > 0) {\r\n      await prisma.orderEvent.deleteMany({ where: { orderId: { in: orderIds } } });\r\n      await prisma.order.deleteMany({ where: { id: { in: orderIds } } });\r\n    }\r\n    await prisma.package.deleteMany({ where: { id: { in: ids } } });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    revalidatePath('/admin');\r\n    return { success: true, count: ids.length };\r\n  } catch (error) {\r\n    console.error('Failed to bulk delete:', error);\r\n    return { success: false, error: 'Gagal menghapus paket.' };\r\n  }\r\n}\r\n\r\nexport async function bulkUpdatePackages(ids: string[], data: { isActive?: boolean }) {\r\n  try {\r\n    await prisma.package.updateMany({ where: { id: { in: ids } }, data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true, count: ids.length };\r\n  } catch (error) {\r\n    console.error('Failed to bulk update:', error);\r\n    return { success: false, error: 'Gagal mengupdate paket.' };\r\n  }\r\n}\r\n\r\nexport async function uploadPackageImage(formData: FormData): Promise<{ success: boolean; url?: string; error?: string }> {\r\n  try {\r\n    const file = formData.get('file') as File;\r\n    if (!file || file.size === 0) return { success: false, error: 'File tidak ditemukan.' };\r\n\r\n    const allowed = ['image/jpeg', 'image/png', 'image/webp', 'image/gif', 'image/avif'];\r\n    if (!allowed.includes(file.type)) return { success: false, error: 'Format tidak didukung. Gunakan JPG, PNG, atau WebP.' };\r\n\r\n    if (file.size > 10 * 1024 * 1024) return { success: false, error: 'Ukuran file maksimal 10MB.' };\r\n\r\n    const inputBuffer = Buffer.from(await file.arrayBuffer());\r\n    const webpBuffer = await sharp(inputBuffer)\r\n      .resize(1200, 900, { fit: 'inside', withoutEnlargement: true })\r\n      .webp({ quality: 82 })\r\n      .toBuffer();\r\n\r\n    const filename = `pkg_${Date.now()}.webp`;\r\n    const uploadDir = path.join(getPublicDir(), 'uploads');\r\n    await mkdir(uploadDir, { recursive: true });\r\n    await writeFile(path.join(uploadDir, filename), webpBuffer);\r\n\r\n    return { success: true, url: `/uploads/${filename}` };\r\n  } catch (error) {\r\n    console.error('Upload failed:', error);\r\n    return { success: false, error: 'Upload gagal.' };\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MA2BsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,oDAAA"}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dwiya/.gemini/antigravity/scratch/toro-store-app/src/actions/package.ts"],"sourcesContent":["'use server';\r\n\r\nimport { prisma } from '@/lib/prisma';\r\nimport { revalidatePath } from 'next/cache';\r\nimport { writeFile, mkdir } from 'fs/promises';\r\nimport { existsSync } from 'fs';\r\nimport path from 'path';\r\nimport sharp from 'sharp';\r\n\r\nfunction getPublicDir(): string {\r\n  const subDirCandidate = path.join(process.cwd(), 'toro-store-app', 'public');\r\n  if (existsSync(subDirCandidate)) return subDirCandidate;\r\n  return path.join(process.cwd(), 'public');\r\n}\r\n\r\nexport async function getPackages() {\r\n  try {\r\n    return await prisma.package.findMany({\r\n      where: { isActive: true },\r\n      orderBy: [{ sortOrder: 'asc' }, { createdAt: 'asc' }],\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch packages:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getAdminPackages() {\r\n  try {\r\n    return await prisma.package.findMany({\r\n      orderBy: [{ sortOrder: 'asc' }, { createdAt: 'asc' }],\r\n      include: { _count: { select: { orders: true } } },\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch admin packages:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getPackageById(id: string) {\r\n  try {\r\n    return await prisma.package.findUnique({ where: { id } });\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function createPackage(data: {\r\n  name: string;\r\n  description?: string;\r\n  price: string;\r\n  category: string;\r\n  imageUrl?: string;\r\n  stock: number;\r\n  isActive: boolean;\r\n  sortOrder: number;\r\n}) {\r\n  try {\r\n    await prisma.package.create({ data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to create package:', error);\r\n    return { success: false, error: 'Gagal membuat paket.' };\r\n  }\r\n}\r\n\r\nexport async function updatePackage(\r\n  id: string,\r\n  data: {\r\n    name?: string;\r\n    description?: string;\r\n    price?: string;\r\n    category?: string;\r\n    imageUrl?: string;\r\n    stock?: number;\r\n    isActive?: boolean;\r\n    sortOrder?: number;\r\n  }\r\n) {\r\n  try {\r\n    await prisma.package.update({ where: { id }, data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to update package:', error);\r\n    return { success: false, error: 'Gagal mengupdate paket.' };\r\n  }\r\n}\r\n\r\nexport async function deletePackage(id: string) {\r\n  try {\r\n    // Delete order events first, then orders, then package (cascade)\r\n    const orders = await prisma.order.findMany({ where: { packageId: id }, select: { id: true } });\r\n    const orderIds = orders.map(o => o.id);\r\n    if (orderIds.length > 0) {\r\n      await prisma.orderEvent.deleteMany({ where: { orderId: { in: orderIds } } });\r\n      await prisma.order.deleteMany({ where: { id: { in: orderIds } } });\r\n    }\r\n    await prisma.package.delete({ where: { id } });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    revalidatePath('/admin');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to delete package:', error);\r\n    return { success: false, error: 'Gagal menghapus paket.' };\r\n  }\r\n}\r\n\r\nexport async function bulkDeletePackages(ids: string[]) {\r\n  try {\r\n    const orders = await prisma.order.findMany({ where: { packageId: { in: ids } }, select: { id: true } });\r\n    const orderIds = orders.map(o => o.id);\r\n    if (orderIds.length > 0) {\r\n      await prisma.orderEvent.deleteMany({ where: { orderId: { in: orderIds } } });\r\n      await prisma.order.deleteMany({ where: { id: { in: orderIds } } });\r\n    }\r\n    await prisma.package.deleteMany({ where: { id: { in: ids } } });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    revalidatePath('/admin');\r\n    return { success: true, count: ids.length };\r\n  } catch (error) {\r\n    console.error('Failed to bulk delete:', error);\r\n    return { success: false, error: 'Gagal menghapus paket.' };\r\n  }\r\n}\r\n\r\nexport async function bulkUpdatePackages(ids: string[], data: { isActive?: boolean }) {\r\n  try {\r\n    await prisma.package.updateMany({ where: { id: { in: ids } }, data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true, count: ids.length };\r\n  } catch (error) {\r\n    console.error('Failed to bulk update:', error);\r\n    return { success: false, error: 'Gagal mengupdate paket.' };\r\n  }\r\n}\r\n\r\nexport async function uploadPackageImage(formData: FormData): Promise<{ success: boolean; url?: string; error?: string }> {\r\n  try {\r\n    const file = formData.get('file') as File;\r\n    if (!file || file.size === 0) return { success: false, error: 'File tidak ditemukan.' };\r\n\r\n    const allowed = ['image/jpeg', 'image/png', 'image/webp', 'image/gif', 'image/avif'];\r\n    if (!allowed.includes(file.type)) return { success: false, error: 'Format tidak didukung. Gunakan JPG, PNG, atau WebP.' };\r\n\r\n    if (file.size > 10 * 1024 * 1024) return { success: false, error: 'Ukuran file maksimal 10MB.' };\r\n\r\n    const inputBuffer = Buffer.from(await file.arrayBuffer());\r\n    const webpBuffer = await sharp(inputBuffer)\r\n      .resize(1200, 900, { fit: 'inside', withoutEnlargement: true })\r\n      .webp({ quality: 82 })\r\n      .toBuffer();\r\n\r\n    const filename = `pkg_${Date.now()}.webp`;\r\n    const uploadDir = path.join(getPublicDir(), 'uploads');\r\n    await mkdir(uploadDir, { recursive: true });\r\n    await writeFile(path.join(uploadDir, filename), webpBuffer);\r\n\r\n    return { success: true, url: `/uploads/${filename}` };\r\n  } catch (error) {\r\n    console.error('Upload failed:', error);\r\n    return { success: false, error: 'Upload gagal.' };\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MA4FsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,iDAAA"}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dwiya/.gemini/antigravity/scratch/toro-store-app/src/actions/package.ts"],"sourcesContent":["'use server';\r\n\r\nimport { prisma } from '@/lib/prisma';\r\nimport { revalidatePath } from 'next/cache';\r\nimport { writeFile, mkdir } from 'fs/promises';\r\nimport { existsSync } from 'fs';\r\nimport path from 'path';\r\nimport sharp from 'sharp';\r\n\r\nfunction getPublicDir(): string {\r\n  const subDirCandidate = path.join(process.cwd(), 'toro-store-app', 'public');\r\n  if (existsSync(subDirCandidate)) return subDirCandidate;\r\n  return path.join(process.cwd(), 'public');\r\n}\r\n\r\nexport async function getPackages() {\r\n  try {\r\n    return await prisma.package.findMany({\r\n      where: { isActive: true },\r\n      orderBy: [{ sortOrder: 'asc' }, { createdAt: 'asc' }],\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch packages:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getAdminPackages() {\r\n  try {\r\n    return await prisma.package.findMany({\r\n      orderBy: [{ sortOrder: 'asc' }, { createdAt: 'asc' }],\r\n      include: { _count: { select: { orders: true } } },\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch admin packages:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getPackageById(id: string) {\r\n  try {\r\n    return await prisma.package.findUnique({ where: { id } });\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function createPackage(data: {\r\n  name: string;\r\n  description?: string;\r\n  price: string;\r\n  category: string;\r\n  imageUrl?: string;\r\n  stock: number;\r\n  isActive: boolean;\r\n  sortOrder: number;\r\n}) {\r\n  try {\r\n    await prisma.package.create({ data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to create package:', error);\r\n    return { success: false, error: 'Gagal membuat paket.' };\r\n  }\r\n}\r\n\r\nexport async function updatePackage(\r\n  id: string,\r\n  data: {\r\n    name?: string;\r\n    description?: string;\r\n    price?: string;\r\n    category?: string;\r\n    imageUrl?: string;\r\n    stock?: number;\r\n    isActive?: boolean;\r\n    sortOrder?: number;\r\n  }\r\n) {\r\n  try {\r\n    await prisma.package.update({ where: { id }, data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to update package:', error);\r\n    return { success: false, error: 'Gagal mengupdate paket.' };\r\n  }\r\n}\r\n\r\nexport async function deletePackage(id: string) {\r\n  try {\r\n    // Delete order events first, then orders, then package (cascade)\r\n    const orders = await prisma.order.findMany({ where: { packageId: id }, select: { id: true } });\r\n    const orderIds = orders.map(o => o.id);\r\n    if (orderIds.length > 0) {\r\n      await prisma.orderEvent.deleteMany({ where: { orderId: { in: orderIds } } });\r\n      await prisma.order.deleteMany({ where: { id: { in: orderIds } } });\r\n    }\r\n    await prisma.package.delete({ where: { id } });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    revalidatePath('/admin');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to delete package:', error);\r\n    return { success: false, error: 'Gagal menghapus paket.' };\r\n  }\r\n}\r\n\r\nexport async function bulkDeletePackages(ids: string[]) {\r\n  try {\r\n    const orders = await prisma.order.findMany({ where: { packageId: { in: ids } }, select: { id: true } });\r\n    const orderIds = orders.map(o => o.id);\r\n    if (orderIds.length > 0) {\r\n      await prisma.orderEvent.deleteMany({ where: { orderId: { in: orderIds } } });\r\n      await prisma.order.deleteMany({ where: { id: { in: orderIds } } });\r\n    }\r\n    await prisma.package.deleteMany({ where: { id: { in: ids } } });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    revalidatePath('/admin');\r\n    return { success: true, count: ids.length };\r\n  } catch (error) {\r\n    console.error('Failed to bulk delete:', error);\r\n    return { success: false, error: 'Gagal menghapus paket.' };\r\n  }\r\n}\r\n\r\nexport async function bulkUpdatePackages(ids: string[], data: { isActive?: boolean }) {\r\n  try {\r\n    await prisma.package.updateMany({ where: { id: { in: ids } }, data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true, count: ids.length };\r\n  } catch (error) {\r\n    console.error('Failed to bulk update:', error);\r\n    return { success: false, error: 'Gagal mengupdate paket.' };\r\n  }\r\n}\r\n\r\nexport async function uploadPackageImage(formData: FormData): Promise<{ success: boolean; url?: string; error?: string }> {\r\n  try {\r\n    const file = formData.get('file') as File;\r\n    if (!file || file.size === 0) return { success: false, error: 'File tidak ditemukan.' };\r\n\r\n    const allowed = ['image/jpeg', 'image/png', 'image/webp', 'image/gif', 'image/avif'];\r\n    if (!allowed.includes(file.type)) return { success: false, error: 'Format tidak didukung. Gunakan JPG, PNG, atau WebP.' };\r\n\r\n    if (file.size > 10 * 1024 * 1024) return { success: false, error: 'Ukuran file maksimal 10MB.' };\r\n\r\n    const inputBuffer = Buffer.from(await file.arrayBuffer());\r\n    const webpBuffer = await sharp(inputBuffer)\r\n      .resize(1200, 900, { fit: 'inside', withoutEnlargement: true })\r\n      .webp({ quality: 82 })\r\n      .toBuffer();\r\n\r\n    const filename = `pkg_${Date.now()}.webp`;\r\n    const uploadDir = path.join(getPublicDir(), 'uploads');\r\n    await mkdir(uploadDir, { recursive: true });\r\n    await writeFile(path.join(uploadDir, filename), webpBuffer);\r\n\r\n    return { success: true, url: `/uploads/${filename}` };\r\n  } catch (error) {\r\n    console.error('Upload failed:', error);\r\n    return { success: false, error: 'Upload gagal.' };\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAoEsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,iDAAA"}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dwiya/.gemini/antigravity/scratch/toro-store-app/src/actions/package.ts"],"sourcesContent":["'use server';\r\n\r\nimport { prisma } from '@/lib/prisma';\r\nimport { revalidatePath } from 'next/cache';\r\nimport { writeFile, mkdir } from 'fs/promises';\r\nimport { existsSync } from 'fs';\r\nimport path from 'path';\r\nimport sharp from 'sharp';\r\n\r\nfunction getPublicDir(): string {\r\n  const subDirCandidate = path.join(process.cwd(), 'toro-store-app', 'public');\r\n  if (existsSync(subDirCandidate)) return subDirCandidate;\r\n  return path.join(process.cwd(), 'public');\r\n}\r\n\r\nexport async function getPackages() {\r\n  try {\r\n    return await prisma.package.findMany({\r\n      where: { isActive: true },\r\n      orderBy: [{ sortOrder: 'asc' }, { createdAt: 'asc' }],\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch packages:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getAdminPackages() {\r\n  try {\r\n    return await prisma.package.findMany({\r\n      orderBy: [{ sortOrder: 'asc' }, { createdAt: 'asc' }],\r\n      include: { _count: { select: { orders: true } } },\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch admin packages:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getPackageById(id: string) {\r\n  try {\r\n    return await prisma.package.findUnique({ where: { id } });\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function createPackage(data: {\r\n  name: string;\r\n  description?: string;\r\n  price: string;\r\n  category: string;\r\n  imageUrl?: string;\r\n  stock: number;\r\n  isActive: boolean;\r\n  sortOrder: number;\r\n}) {\r\n  try {\r\n    await prisma.package.create({ data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to create package:', error);\r\n    return { success: false, error: 'Gagal membuat paket.' };\r\n  }\r\n}\r\n\r\nexport async function updatePackage(\r\n  id: string,\r\n  data: {\r\n    name?: string;\r\n    description?: string;\r\n    price?: string;\r\n    category?: string;\r\n    imageUrl?: string;\r\n    stock?: number;\r\n    isActive?: boolean;\r\n    sortOrder?: number;\r\n  }\r\n) {\r\n  try {\r\n    await prisma.package.update({ where: { id }, data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to update package:', error);\r\n    return { success: false, error: 'Gagal mengupdate paket.' };\r\n  }\r\n}\r\n\r\nexport async function deletePackage(id: string) {\r\n  try {\r\n    // Delete order events first, then orders, then package (cascade)\r\n    const orders = await prisma.order.findMany({ where: { packageId: id }, select: { id: true } });\r\n    const orderIds = orders.map(o => o.id);\r\n    if (orderIds.length > 0) {\r\n      await prisma.orderEvent.deleteMany({ where: { orderId: { in: orderIds } } });\r\n      await prisma.order.deleteMany({ where: { id: { in: orderIds } } });\r\n    }\r\n    await prisma.package.delete({ where: { id } });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    revalidatePath('/admin');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to delete package:', error);\r\n    return { success: false, error: 'Gagal menghapus paket.' };\r\n  }\r\n}\r\n\r\nexport async function bulkDeletePackages(ids: string[]) {\r\n  try {\r\n    const orders = await prisma.order.findMany({ where: { packageId: { in: ids } }, select: { id: true } });\r\n    const orderIds = orders.map(o => o.id);\r\n    if (orderIds.length > 0) {\r\n      await prisma.orderEvent.deleteMany({ where: { orderId: { in: orderIds } } });\r\n      await prisma.order.deleteMany({ where: { id: { in: orderIds } } });\r\n    }\r\n    await prisma.package.deleteMany({ where: { id: { in: ids } } });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    revalidatePath('/admin');\r\n    return { success: true, count: ids.length };\r\n  } catch (error) {\r\n    console.error('Failed to bulk delete:', error);\r\n    return { success: false, error: 'Gagal menghapus paket.' };\r\n  }\r\n}\r\n\r\nexport async function bulkUpdatePackages(ids: string[], data: { isActive?: boolean }) {\r\n  try {\r\n    await prisma.package.updateMany({ where: { id: { in: ids } }, data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true, count: ids.length };\r\n  } catch (error) {\r\n    console.error('Failed to bulk update:', error);\r\n    return { success: false, error: 'Gagal mengupdate paket.' };\r\n  }\r\n}\r\n\r\nexport async function uploadPackageImage(formData: FormData): Promise<{ success: boolean; url?: string; error?: string }> {\r\n  try {\r\n    const file = formData.get('file') as File;\r\n    if (!file || file.size === 0) return { success: false, error: 'File tidak ditemukan.' };\r\n\r\n    const allowed = ['image/jpeg', 'image/png', 'image/webp', 'image/gif', 'image/avif'];\r\n    if (!allowed.includes(file.type)) return { success: false, error: 'Format tidak didukung. Gunakan JPG, PNG, atau WebP.' };\r\n\r\n    if (file.size > 10 * 1024 * 1024) return { success: false, error: 'Ukuran file maksimal 10MB.' };\r\n\r\n    const inputBuffer = Buffer.from(await file.arrayBuffer());\r\n    const webpBuffer = await sharp(inputBuffer)\r\n      .resize(1200, 900, { fit: 'inside', withoutEnlargement: true })\r\n      .webp({ quality: 82 })\r\n      .toBuffer();\r\n\r\n    const filename = `pkg_${Date.now()}.webp`;\r\n    const uploadDir = path.join(getPublicDir(), 'uploads');\r\n    await mkdir(uploadDir, { recursive: true });\r\n    await writeFile(path.join(uploadDir, filename), webpBuffer);\r\n\r\n    return { success: true, url: `/uploads/${filename}` };\r\n  } catch (error) {\r\n    console.error('Upload failed:', error);\r\n    return { success: false, error: 'Upload gagal.' };\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAgHsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,sDAAA"}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dwiya/.gemini/antigravity/scratch/toro-store-app/src/actions/package.ts"],"sourcesContent":["'use server';\r\n\r\nimport { prisma } from '@/lib/prisma';\r\nimport { revalidatePath } from 'next/cache';\r\nimport { writeFile, mkdir } from 'fs/promises';\r\nimport { existsSync } from 'fs';\r\nimport path from 'path';\r\nimport sharp from 'sharp';\r\n\r\nfunction getPublicDir(): string {\r\n  const subDirCandidate = path.join(process.cwd(), 'toro-store-app', 'public');\r\n  if (existsSync(subDirCandidate)) return subDirCandidate;\r\n  return path.join(process.cwd(), 'public');\r\n}\r\n\r\nexport async function getPackages() {\r\n  try {\r\n    return await prisma.package.findMany({\r\n      where: { isActive: true },\r\n      orderBy: [{ sortOrder: 'asc' }, { createdAt: 'asc' }],\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch packages:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getAdminPackages() {\r\n  try {\r\n    return await prisma.package.findMany({\r\n      orderBy: [{ sortOrder: 'asc' }, { createdAt: 'asc' }],\r\n      include: { _count: { select: { orders: true } } },\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch admin packages:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getPackageById(id: string) {\r\n  try {\r\n    return await prisma.package.findUnique({ where: { id } });\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function createPackage(data: {\r\n  name: string;\r\n  description?: string;\r\n  price: string;\r\n  category: string;\r\n  imageUrl?: string;\r\n  stock: number;\r\n  isActive: boolean;\r\n  sortOrder: number;\r\n}) {\r\n  try {\r\n    await prisma.package.create({ data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to create package:', error);\r\n    return { success: false, error: 'Gagal membuat paket.' };\r\n  }\r\n}\r\n\r\nexport async function updatePackage(\r\n  id: string,\r\n  data: {\r\n    name?: string;\r\n    description?: string;\r\n    price?: string;\r\n    category?: string;\r\n    imageUrl?: string;\r\n    stock?: number;\r\n    isActive?: boolean;\r\n    sortOrder?: number;\r\n  }\r\n) {\r\n  try {\r\n    await prisma.package.update({ where: { id }, data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to update package:', error);\r\n    return { success: false, error: 'Gagal mengupdate paket.' };\r\n  }\r\n}\r\n\r\nexport async function deletePackage(id: string) {\r\n  try {\r\n    // Delete order events first, then orders, then package (cascade)\r\n    const orders = await prisma.order.findMany({ where: { packageId: id }, select: { id: true } });\r\n    const orderIds = orders.map(o => o.id);\r\n    if (orderIds.length > 0) {\r\n      await prisma.orderEvent.deleteMany({ where: { orderId: { in: orderIds } } });\r\n      await prisma.order.deleteMany({ where: { id: { in: orderIds } } });\r\n    }\r\n    await prisma.package.delete({ where: { id } });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    revalidatePath('/admin');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to delete package:', error);\r\n    return { success: false, error: 'Gagal menghapus paket.' };\r\n  }\r\n}\r\n\r\nexport async function bulkDeletePackages(ids: string[]) {\r\n  try {\r\n    const orders = await prisma.order.findMany({ where: { packageId: { in: ids } }, select: { id: true } });\r\n    const orderIds = orders.map(o => o.id);\r\n    if (orderIds.length > 0) {\r\n      await prisma.orderEvent.deleteMany({ where: { orderId: { in: orderIds } } });\r\n      await prisma.order.deleteMany({ where: { id: { in: orderIds } } });\r\n    }\r\n    await prisma.package.deleteMany({ where: { id: { in: ids } } });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    revalidatePath('/admin');\r\n    return { success: true, count: ids.length };\r\n  } catch (error) {\r\n    console.error('Failed to bulk delete:', error);\r\n    return { success: false, error: 'Gagal menghapus paket.' };\r\n  }\r\n}\r\n\r\nexport async function bulkUpdatePackages(ids: string[], data: { isActive?: boolean }) {\r\n  try {\r\n    await prisma.package.updateMany({ where: { id: { in: ids } }, data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true, count: ids.length };\r\n  } catch (error) {\r\n    console.error('Failed to bulk update:', error);\r\n    return { success: false, error: 'Gagal mengupdate paket.' };\r\n  }\r\n}\r\n\r\nexport async function uploadPackageImage(formData: FormData): Promise<{ success: boolean; url?: string; error?: string }> {\r\n  try {\r\n    const file = formData.get('file') as File;\r\n    if (!file || file.size === 0) return { success: false, error: 'File tidak ditemukan.' };\r\n\r\n    const allowed = ['image/jpeg', 'image/png', 'image/webp', 'image/gif', 'image/avif'];\r\n    if (!allowed.includes(file.type)) return { success: false, error: 'Format tidak didukung. Gunakan JPG, PNG, atau WebP.' };\r\n\r\n    if (file.size > 10 * 1024 * 1024) return { success: false, error: 'Ukuran file maksimal 10MB.' };\r\n\r\n    const inputBuffer = Buffer.from(await file.arrayBuffer());\r\n    const webpBuffer = await sharp(inputBuffer)\r\n      .resize(1200, 900, { fit: 'inside', withoutEnlargement: true })\r\n      .webp({ quality: 82 })\r\n      .toBuffer();\r\n\r\n    const filename = `pkg_${Date.now()}.webp`;\r\n    const uploadDir = path.join(getPublicDir(), 'uploads');\r\n    await mkdir(uploadDir, { recursive: true });\r\n    await writeFile(path.join(uploadDir, filename), webpBuffer);\r\n\r\n    return { success: true, url: `/uploads/${filename}` };\r\n  } catch (error) {\r\n    console.error('Upload failed:', error);\r\n    return { success: false, error: 'Upload gagal.' };\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAmIsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,sDAAA"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dwiya/.gemini/antigravity/scratch/toro-store-app/src/app/admin/packages/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport Link from 'next/link';\r\nimport { toast } from 'react-toastify';\r\nimport {\r\n  getAdminPackages,\r\n  deletePackage,\r\n  updatePackage,\r\n  bulkDeletePackages,\r\n  bulkUpdatePackages,\r\n} from '@/actions/package';\r\n\r\ntype Package = {\r\n  id: string;\r\n  name: string;\r\n  price: string;\r\n  category: string;\r\n  imageUrl: string | null;\r\n  stock: number;\r\n  isActive: boolean;\r\n  sortOrder: number;\r\n  createdAt: Date;\r\n  _count: { orders: number };\r\n};\r\n\r\nconst CATEGORIES = ['Semua', 'Basic', 'Premium', 'Special', 'Event', 'Limited'];\r\nconst PAGE_SIZES = [6, 12, 24];\r\n\r\nexport default function AdminPackagesPage() {\r\n  const [packages, setPackages] = useState<Package[]>([]);\r\n  const [loading, setLoading]   = useState(true);\r\n  const [actionLoading, setActionLoading] = useState<string | null>(null); // id being acted on\r\n\r\n  // Filter / Search / Sort / Pagination state\r\n  const [search,   setSearch]   = useState('');\r\n  const [category, setCategory] = useState('Semua');\r\n  const [status,   setStatus]   = useState<'all' | 'active' | 'inactive'>('all');\r\n  const [sortBy,   setSortBy]   = useState<'sortOrder' | 'name' | 'price' | 'stock' | 'orders' | 'newest'>('sortOrder');\r\n  const [pageSize, setPageSize] = useState(12);\r\n  const [page,     setPage]     = useState(1);\r\n\r\n  // Bulk select\r\n  const [selected, setSelected] = useState<Set<string>>(new Set());\r\n\r\n  const fetchPackages = useCallback(async () => {\r\n    setLoading(true);\r\n    const data = await getAdminPackages();\r\n    setPackages(data as Package[]);\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  useEffect(() => { fetchPackages(); }, [fetchPackages]);\r\n\r\n  // Reset page when filters change\r\n  useEffect(() => { setPage(1); setSelected(new Set()); }, [search, category, status, sortBy, pageSize]);\r\n\r\n  // ---- Derived filtered/sorted/paginated list ----\r\n  const filtered = useMemo(() => {\r\n    let list = [...packages];\r\n    if (search.trim()) {\r\n      const q = search.toLowerCase();\r\n      list = list.filter(p => p.name.toLowerCase().includes(q) || p.category.toLowerCase().includes(q));\r\n    }\r\n    if (category !== 'Semua') list = list.filter(p => p.category === category);\r\n    if (status === 'active')   list = list.filter(p => p.isActive);\r\n    if (status === 'inactive') list = list.filter(p => !p.isActive);\r\n\r\n    list.sort((a, b) => {\r\n      switch (sortBy) {\r\n        case 'name':     return a.name.localeCompare(b.name);\r\n        case 'price':    return a.price.localeCompare(b.price);\r\n        case 'stock':    return b.stock - a.stock;\r\n        case 'orders':   return b._count.orders - a._count.orders;\r\n        case 'newest':   return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\r\n        default:         return a.sortOrder - b.sortOrder;\r\n      }\r\n    });\r\n    return list;\r\n  }, [packages, search, category, status, sortBy]);\r\n\r\n  const totalPages = Math.max(1, Math.ceil(filtered.length / pageSize));\r\n  const paginated  = filtered.slice((page - 1) * pageSize, page * pageSize);\r\n\r\n  // All ids on current page\r\n  const pageIds = paginated.map(p => p.id);\r\n  const allPageSelected = pageIds.length > 0 && pageIds.every(id => selected.has(id));\r\n  const somePageSelected = pageIds.some(id => selected.has(id));\r\n\r\n  // ---- Handlers ----\r\n  const toggleSelect = (id: string) => {\r\n    setSelected(prev => {\r\n      const next = new Set(prev);\r\n      next.has(id) ? next.delete(id) : next.add(id);\r\n      return next;\r\n    });\r\n  };\r\n\r\n  const toggleSelectAll = () => {\r\n    if (allPageSelected) {\r\n      setSelected(prev => { const n = new Set(prev); pageIds.forEach(id => n.delete(id)); return n; });\r\n    } else {\r\n      setSelected(prev => { const n = new Set(prev); pageIds.forEach(id => n.add(id)); return n; });\r\n    }\r\n  };\r\n\r\n  const handleToggleStatus = async (pkg: Package) => {\r\n    setActionLoading(pkg.id);\r\n    const res = await updatePackage(pkg.id, { isActive: !pkg.isActive });\r\n    if (res.success) {\r\n      toast.success(pkg.isActive ? `\"${pkg.name}\" dinonaktifkan.` : `\"${pkg.name}\" diaktifkan.`);\r\n      fetchPackages();\r\n    } else {\r\n      toast.error(res.error || 'Gagal mengubah status.');\r\n    }\r\n    setActionLoading(null);\r\n  };\r\n\r\n  const handleDelete = async (pkg: Package) => {\r\n    if (!confirm(`Hapus paket \"${pkg.name}\"?\\n\\nSemua order terkait juga akan dihapus.`)) return;\r\n    setActionLoading(pkg.id);\r\n    const res = await deletePackage(pkg.id);\r\n    if (res.success) {\r\n      toast.success(`Paket \"${pkg.name}\" berhasil dihapus.`);\r\n      setSelected(prev => { const n = new Set(prev); n.delete(pkg.id); return n; });\r\n      fetchPackages();\r\n    } else {\r\n      toast.error(res.error || 'Gagal menghapus paket.');\r\n    }\r\n    setActionLoading(null);\r\n  };\r\n\r\n  const handleBulkActivate = async () => {\r\n    const ids = [...selected];\r\n    if (!ids.length) return;\r\n    const res = await bulkUpdatePackages(ids, { isActive: true });\r\n    if (res.success) { toast.success(`${res.count} paket diaktifkan.`); setSelected(new Set()); fetchPackages(); }\r\n    else toast.error(res.error);\r\n  };\r\n\r\n  const handleBulkDeactivate = async () => {\r\n    const ids = [...selected];\r\n    if (!ids.length) return;\r\n    const res = await bulkUpdatePackages(ids, { isActive: false });\r\n    if (res.success) { toast.success(`${res.count} paket dinonaktifkan.`); setSelected(new Set()); fetchPackages(); }\r\n    else toast.error(res.error);\r\n  };\r\n\r\n  const handleBulkDelete = async () => {\r\n    const ids = [...selected];\r\n    if (!ids.length) return;\r\n    if (!confirm(`Hapus ${ids.length} paket yang dipilih?\\n\\nSemua order terkait juga akan dihapus. Tindakan ini tidak bisa diurungkan.`)) return;\r\n    const res = await bulkDeletePackages(ids);\r\n    if (res.success) { toast.success(`${res.count} paket berhasil dihapus.`); setSelected(new Set()); fetchPackages(); }\r\n    else toast.error(res.error);\r\n  };\r\n\r\n  // ---- Render ----\r\n  return (\r\n    <div className=\"space-y-5\">\r\n\r\n      {/* ===== HEADER ===== */}\r\n      <header className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4 border-b border-white/5 pb-5\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold\">Manajemen Paket</h1>\r\n          <p className=\"text-neutral-400 mt-1\">\r\n            {loading ? 'Memuat...' : `${packages.length} paket terdaftar · ${filtered.length} ditampilkan`}\r\n          </p>\r\n        </div>\r\n        <Link\r\n          href=\"/admin/packages/new\"\r\n          className=\"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-500 hover:bg-blue-400 text-neutral-950 font-bold rounded-xl transition-all shadow-lg shadow-blue-500/20 shrink-0\"\r\n        >\r\n          <i className=\"fa-solid fa-plus\" /> Tambah Paket\r\n        </Link>\r\n      </header>\r\n\r\n      {/* ===== TOOLBAR: Search + Filters + Sort + Page Size ===== */}\r\n      <div className=\"space-y-3\">\r\n        {/* Row 1: Search + Refresh */}\r\n        <div className=\"flex gap-2\">\r\n          <div className=\"relative flex-1\">\r\n            <i className=\"fa-solid fa-magnifying-glass absolute left-3.5 top-1/2 -translate-y-1/2 text-neutral-500 text-sm\" />\r\n            <input\r\n              type=\"text\"\r\n              value={search}\r\n              onChange={e => setSearch(e.target.value)}\r\n              placeholder=\"Cari nama atau kategori paket...\"\r\n              className=\"w-full bg-[#0d0f17] border border-white/10 rounded-xl pl-10 pr-4 py-2.5 text-sm text-white placeholder:text-neutral-600 focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/30 outline-none transition-all\"\r\n            />\r\n            {search && (\r\n              <button onClick={() => setSearch('')} className=\"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-500 hover:text-white transition-colors\">\r\n                <i className=\"fa-solid fa-xmark text-sm\" />\r\n              </button>\r\n            )}\r\n          </div>\r\n          <button\r\n            onClick={fetchPackages}\r\n            disabled={loading}\r\n            className=\"px-3.5 py-2.5 bg-[#0d0f17] border border-white/10 rounded-xl text-neutral-400 hover:text-white hover:border-white/20 transition-all disabled:opacity-50\"\r\n            title=\"Refresh\"\r\n          >\r\n            <i className={`fa-solid fa-rotate-right text-sm ${loading ? 'animate-spin' : ''}`} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Row 2: Category tabs + Status + Sort + PageSize */}\r\n        <div className=\"flex flex-wrap gap-2 items-center\">\r\n          {/* Category filter */}\r\n          <div className=\"flex gap-1 flex-wrap\">\r\n            {CATEGORIES.map(cat => (\r\n              <button\r\n                key={cat}\r\n                onClick={() => setCategory(cat)}\r\n                className={`px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${\r\n                  category === cat\r\n                    ? 'bg-blue-500 text-neutral-950'\r\n                    : 'bg-[#0d0f17] border border-white/10 text-neutral-400 hover:text-white hover:border-white/20'\r\n                }`}\r\n              >\r\n                {cat}\r\n              </button>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"ml-auto flex gap-2 items-center flex-wrap justify-end\">\r\n            {/* Status filter */}\r\n            <select\r\n              value={status}\r\n              onChange={e => setStatus(e.target.value as typeof status)}\r\n              className=\"bg-[#0d0f17] border border-white/10 rounded-lg px-3 py-1.5 text-xs text-neutral-400 outline-none cursor-pointer hover:border-white/20 transition-all\"\r\n            >\r\n              <option value=\"all\">Semua Status</option>\r\n              <option value=\"active\">Aktif</option>\r\n              <option value=\"inactive\">Nonaktif</option>\r\n            </select>\r\n\r\n            {/* Sort */}\r\n            <select\r\n              value={sortBy}\r\n              onChange={e => setSortBy(e.target.value as typeof sortBy)}\r\n              className=\"bg-[#0d0f17] border border-white/10 rounded-lg px-3 py-1.5 text-xs text-neutral-400 outline-none cursor-pointer hover:border-white/20 transition-all\"\r\n            >\r\n              <option value=\"sortOrder\">Urutan</option>\r\n              <option value=\"name\">Nama A-Z</option>\r\n              <option value=\"newest\">Terbaru</option>\r\n              <option value=\"stock\">Stok ↓</option>\r\n              <option value=\"orders\">Order ↓</option>\r\n            </select>\r\n\r\n            {/* Page size */}\r\n            <select\r\n              value={pageSize}\r\n              onChange={e => setPageSize(Number(e.target.value))}\r\n              className=\"bg-[#0d0f17] border border-white/10 rounded-lg px-3 py-1.5 text-xs text-neutral-400 outline-none cursor-pointer hover:border-white/20 transition-all\"\r\n            >\r\n              {PAGE_SIZES.map(s => <option key={s} value={s}>{s} / hal</option>)}\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ===== BULK ACTION BAR ===== */}\r\n      {selected.size > 0 && (\r\n        <div className=\"flex items-center gap-3 px-4 py-3 bg-blue-500/10 border border-blue-500/20 rounded-xl text-sm\">\r\n          <i className=\"fa-solid fa-check-square text-blue-400\" />\r\n          <span className=\"text-blue-300 font-semibold\">{selected.size} paket dipilih</span>\r\n          <div className=\"ml-auto flex gap-2 flex-wrap\">\r\n            <button\r\n              onClick={handleBulkActivate}\r\n              className=\"px-3 py-1.5 bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 hover:bg-emerald-500/20 rounded-lg text-xs font-semibold transition-colors\"\r\n            >\r\n              <i className=\"fa-solid fa-eye mr-1\" />Aktifkan\r\n            </button>\r\n            <button\r\n              onClick={handleBulkDeactivate}\r\n              className=\"px-3 py-1.5 bg-amber-500/10 text-amber-400 border border-amber-500/20 hover:bg-amber-500/20 rounded-lg text-xs font-semibold transition-colors\"\r\n            >\r\n              <i className=\"fa-solid fa-eye-slash mr-1\" />Nonaktifkan\r\n            </button>\r\n            <button\r\n              onClick={handleBulkDelete}\r\n              className=\"px-3 py-1.5 bg-red-500/10 text-red-400 border border-red-500/20 hover:bg-red-500/20 rounded-lg text-xs font-semibold transition-colors\"\r\n            >\r\n              <i className=\"fa-solid fa-trash mr-1\" />Hapus\r\n            </button>\r\n            <button\r\n              onClick={() => setSelected(new Set())}\r\n              className=\"px-3 py-1.5 bg-neutral-800 text-neutral-400 hover:text-white rounded-lg text-xs font-semibold transition-colors\"\r\n            >\r\n              Batalkan\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ===== SELECT ALL TOGGLE (shown when results exist) ===== */}\r\n      {!loading && filtered.length > 0 && (\r\n        <div className=\"flex items-center justify-between text-xs text-neutral-500 px-1\">\r\n          <label className=\"flex items-center gap-2 cursor-pointer select-none\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={allPageSelected}\r\n              ref={el => { if (el) el.indeterminate = somePageSelected && !allPageSelected; }}\r\n              onChange={toggleSelectAll}\r\n              className=\"w-4 h-4 rounded accent-blue-500 cursor-pointer\"\r\n            />\r\n            <span>Pilih semua di halaman ini ({paginated.length})</span>\r\n          </label>\r\n          <span>\r\n            Hal. {page} dari {totalPages} · {filtered.length} hasil\r\n          </span>\r\n        </div>\r\n      )}\r\n\r\n      {/* ===== LOADING ===== */}\r\n      {loading && (\r\n        <div className=\"flex items-center justify-center py-24\">\r\n          <div className=\"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full\" />\r\n        </div>\r\n      )}\r\n\r\n      {/* ===== EMPTY STATE ===== */}\r\n      {!loading && filtered.length === 0 && (\r\n        <div className=\"flex flex-col items-center justify-center py-20 text-center bg-[#0d0f17] border border-dashed border-neutral-700 rounded-2xl\">\r\n          <div className=\"w-16 h-16 rounded-2xl bg-neutral-800 flex items-center justify-center mb-4\">\r\n            <i className={`text-2xl text-neutral-500 fa-solid ${search || category !== 'Semua' || status !== 'all' ? 'fa-search' : 'fa-box-open'}`} />\r\n          </div>\r\n          <h3 className=\"font-bold text-lg mb-2\">\r\n            {search || category !== 'Semua' || status !== 'all' ? 'Tidak ada hasil' : 'Belum ada paket'}\r\n          </h3>\r\n          <p className=\"text-neutral-500 mb-6 text-sm\">\r\n            {search ? `Tidak ditemukan paket dengan kata kunci \"${search}\".` : 'Coba ubah filter atau tambah paket baru.'}\r\n          </p>\r\n          {search || category !== 'Semua' || status !== 'all' ? (\r\n            <button\r\n              onClick={() => { setSearch(''); setCategory('Semua'); setStatus('all'); }}\r\n              className=\"px-4 py-2 bg-neutral-800 hover:bg-neutral-700 rounded-xl text-sm font-semibold transition-colors\"\r\n            >\r\n              <i className=\"fa-solid fa-xmark mr-2\" />Reset Filter\r\n            </button>\r\n          ) : (\r\n            <Link href=\"/admin/packages/new\" className=\"px-5 py-2.5 bg-blue-500 hover:bg-blue-400 text-neutral-950 font-bold rounded-xl transition-all text-sm\">\r\n              <i className=\"fa-solid fa-plus mr-2\" />Tambah Paket Pertama\r\n            </Link>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* ===== PACKAGE GRID ===== */}\r\n      {!loading && paginated.length > 0 && (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-5\">\r\n          {paginated.map(pkg => {\r\n            const isSelected = selected.has(pkg.id);\r\n            const isActing   = actionLoading === pkg.id;\r\n\r\n            return (\r\n              <div\r\n                key={pkg.id}\r\n                className={`relative bg-[#0d0f17] border rounded-2xl overflow-hidden transition-all group ${\r\n                  isSelected\r\n                    ? 'border-blue-500/50 ring-1 ring-blue-500/30'\r\n                    : pkg.isActive\r\n                    ? 'border-white/5 hover:border-white/10'\r\n                    : 'border-white/5 opacity-60'\r\n                }`}\r\n              >\r\n                {/* Checkbox top-left */}\r\n                <div className=\"absolute top-3 left-3 z-10\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={isSelected}\r\n                    onChange={() => toggleSelect(pkg.id)}\r\n                    className=\"w-4 h-4 rounded accent-blue-500 cursor-pointer shadow-lg\"\r\n                    onClick={e => e.stopPropagation()}\r\n                  />\r\n                </div>\r\n\r\n                {/* Image */}\r\n                <div className=\"relative h-44 bg-neutral-800 overflow-hidden cursor-pointer\" onClick={() => toggleSelect(pkg.id)}>\r\n                  {pkg.imageUrl ? (\r\n                    // eslint-disable-next-line @next/next/no-img-element\r\n                    <img src={pkg.imageUrl} alt={pkg.name} className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\" />\r\n                  ) : (\r\n                    <div className=\"w-full h-full flex items-center justify-center\">\r\n                      <i className=\"fa-solid fa-image text-4xl text-neutral-700\" />\r\n                    </div>\r\n                  )}\r\n                  {/* Status badge */}\r\n                  <div className={`absolute top-3 right-3 text-xs font-bold px-2.5 py-1 rounded-full backdrop-blur-sm ${\r\n                    pkg.isActive\r\n                      ? 'bg-emerald-500/20 text-emerald-400 border border-emerald-500/30'\r\n                      : 'bg-neutral-700 text-neutral-400 border border-neutral-600'\r\n                  }`}>\r\n                    {pkg.isActive ? 'Aktif' : 'Nonaktif'}\r\n                  </div>\r\n                  {/* Category badge */}\r\n                  <div className=\"absolute bottom-3 left-3 text-xs font-semibold px-2.5 py-1 rounded-full bg-black/60 text-neutral-300 backdrop-blur-sm\">\r\n                    {pkg.category}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"p-4\">\r\n                  <div className=\"flex items-start justify-between gap-2 mb-1\">\r\n                    <h3 className=\"font-bold leading-tight line-clamp-1\">{pkg.name}</h3>\r\n                    <span className=\"text-amber-400 font-bold text-sm shrink-0\">{pkg.price}</span>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center gap-3 mt-2 text-xs\">\r\n                    <span className={`flex items-center gap-1 font-semibold ${\r\n                      pkg.stock === 0 ? 'text-red-400' : pkg.stock <= 5 ? 'text-amber-400' : 'text-emerald-400'\r\n                    }`}>\r\n                      <i className=\"fa-solid fa-boxes-stacked\" /> {pkg.stock} stok\r\n                    </span>\r\n                    <span className=\"text-neutral-700\">·</span>\r\n                    <span className=\"text-neutral-500\">\r\n                      <i className=\"fa-solid fa-shopping-cart mr-1\" />{pkg._count.orders} order\r\n                    </span>\r\n                    <span className=\"text-neutral-700\">·</span>\r\n                    <span className=\"text-neutral-600\">#{pkg.sortOrder}</span>\r\n                  </div>\r\n\r\n                  {/* Actions */}\r\n                  <div className=\"flex gap-1.5 mt-3 pt-3 border-t border-neutral-800\">\r\n                    {/* Edit */}\r\n                    <Link\r\n                      href={`/admin/packages/${pkg.id}/edit`}\r\n                      className=\"flex-1 text-center text-xs font-semibold py-2 px-2 bg-neutral-800 hover:bg-neutral-700 rounded-lg transition-colors\"\r\n                    >\r\n                      <i className=\"fa-solid fa-pen-to-square mr-1\" />Edit\r\n                    </Link>\r\n                    {/* Toggle */}\r\n                    <button\r\n                      onClick={() => handleToggleStatus(pkg)}\r\n                      disabled={isActing}\r\n                      className={`text-xs font-semibold py-2 px-2.5 rounded-lg transition-colors disabled:opacity-50 ${\r\n                        pkg.isActive\r\n                          ? 'bg-amber-500/10 text-amber-400 hover:bg-amber-500/20'\r\n                          : 'bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20'\r\n                      }`}\r\n                      title={pkg.isActive ? 'Nonaktifkan' : 'Aktifkan'}\r\n                    >\r\n                      <i className={`fa-solid ${isActing ? 'fa-circle-notch animate-spin' : pkg.isActive ? 'fa-eye-slash' : 'fa-eye'}`} />\r\n                    </button>\r\n                    {/* Delete */}\r\n                    <button\r\n                      onClick={() => handleDelete(pkg)}\r\n                      disabled={isActing}\r\n                      className=\"text-xs font-semibold py-2 px-2.5 bg-red-500/10 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors disabled:opacity-50\"\r\n                      title=\"Hapus paket\"\r\n                    >\r\n                      <i className={`fa-solid ${isActing ? 'fa-circle-notch animate-spin' : 'fa-trash'}`} />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n      {/* ===== PAGINATION ===== */}\r\n      {!loading && totalPages > 1 && (\r\n        <div className=\"flex items-center justify-center gap-2 pt-2\">\r\n          <button\r\n            onClick={() => setPage(1)}\r\n            disabled={page === 1}\r\n            className=\"w-9 h-9 flex items-center justify-center rounded-lg bg-[#0d0f17] border border-white/10 text-neutral-400 hover:text-white hover:border-white/20 transition-all disabled:opacity-30 disabled:cursor-not-allowed\"\r\n          >\r\n            <i className=\"fa-solid fa-angles-left text-xs\" />\r\n          </button>\r\n          <button\r\n            onClick={() => setPage(p => Math.max(1, p - 1))}\r\n            disabled={page === 1}\r\n            className=\"w-9 h-9 flex items-center justify-center rounded-lg bg-[#0d0f17] border border-white/10 text-neutral-400 hover:text-white hover:border-white/20 transition-all disabled:opacity-30 disabled:cursor-not-allowed\"\r\n          >\r\n            <i className=\"fa-solid fa-angle-left text-xs\" />\r\n          </button>\r\n\r\n          {/* Page number pills */}\r\n          {Array.from({ length: totalPages }, (_, i) => i + 1)\r\n            .filter(p => p === 1 || p === totalPages || Math.abs(p - page) <= 1)\r\n            .reduce<(number | '...')[]>((acc, p, i, arr) => {\r\n              if (i > 0 && p - (arr[i - 1] as number) > 1) acc.push('...');\r\n              acc.push(p);\r\n              return acc;\r\n            }, [])\r\n            .map((p, i) =>\r\n              p === '...' ? (\r\n                <span key={`ellipsis-${i}`} className=\"text-neutral-600 px-1\">…</span>\r\n              ) : (\r\n                <button\r\n                  key={p}\r\n                  onClick={() => setPage(p as number)}\r\n                  className={`w-9 h-9 flex items-center justify-center rounded-lg text-sm font-semibold transition-all ${\r\n                    page === p\r\n                      ? 'bg-blue-500 text-neutral-950'\r\n                      : 'bg-[#0d0f17] border border-white/10 text-neutral-400 hover:text-white hover:border-white/20'\r\n                  }`}\r\n                >\r\n                  {p}\r\n                </button>\r\n              )\r\n            )\r\n          }\r\n\r\n          <button\r\n            onClick={() => setPage(p => Math.min(totalPages, p + 1))}\r\n            disabled={page === totalPages}\r\n            className=\"w-9 h-9 flex items-center justify-center rounded-lg bg-[#0d0f17] border border-white/10 text-neutral-400 hover:text-white hover:border-white/20 transition-all disabled:opacity-30 disabled:cursor-not-allowed\"\r\n          >\r\n            <i className=\"fa-solid fa-angle-right text-xs\" />\r\n          </button>\r\n          <button\r\n            onClick={() => setPage(totalPages)}\r\n            disabled={page === totalPages}\r\n            className=\"w-9 h-9 flex items-center justify-center rounded-lg bg-[#0d0f17] border border-white/10 text-neutral-400 hover:text-white hover:border-white/20 transition-all disabled:opacity-30 disabled:cursor-not-allowed\"\r\n          >\r\n            <i className=\"fa-solid fa-angles-right text-xs\" />\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}