{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dwiya/.gemini/antigravity/scratch/toro-store-app/src/actions/auth.ts"],"sourcesContent":["'use server';\r\n\r\nimport { SignJWT } from 'jose';\r\nimport { cookies } from 'next/headers';\r\n\r\nconst secret = new TextEncoder().encode(\r\n  process.env.ADMIN_PASSWORD || 'admin_toro_fallback_secret_key'\r\n);\r\n\r\nexport async function login(password: string) {\r\n  const adminPassword = process.env.ADMIN_PASSWORD || 'admin_toro';\r\n\r\n  if (password !== adminPassword) {\r\n    return { error: 'Password salah' };\r\n  }\r\n\r\n  // Create JWT token using edge-compatible formatting\r\n  const token = await new SignJWT({ admin: true })\r\n    .setProtectedHeader({ alg: 'HS256' })\r\n    .setIssuedAt()\r\n    .setExpirationTime('24h') // Set 24 hour session\r\n    .sign(secret);\r\n\r\n  const cookieStore = await cookies();\r\n  cookieStore.set('admin_session', token, {\r\n    httpOnly: true,\r\n    secure: process.env.NODE_ENV === 'production',\r\n    sameSite: 'lax',\r\n    path: '/admin', // Scope to admin area\r\n    maxAge: 60 * 60 * 24, // 24 hours\r\n  });\r\n\r\n  return { success: true };\r\n}\r\n\r\nexport async function logout() {\r\n  const cookieStore = await cookies();\r\n  cookieStore.set('admin_session', '', {\r\n    path: '/admin',\r\n    maxAge: 0,\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAmCsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,0CAAA"}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dwiya/.gemini/antigravity/scratch/toro-store-app/src/components/AdminLayoutClient.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { usePathname, useRouter } from 'next/navigation';\r\nimport { logout } from '@/actions/auth';\r\nimport { useState, useEffect } from 'react';\r\nimport Image from 'next/image';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nconst navItems = [\r\n  { href: '/admin', label: 'Dashboard', icon: 'fa-chart-line', exact: true },\r\n  { href: '/admin/orders', label: 'Data Order', icon: 'fa-list-check' },\r\n  { href: '/admin/packages', label: 'Paket', icon: 'fa-layer-group' },\r\n  { href: '/admin/stock', label: 'Stok Lama', icon: 'fa-boxes-stacked' },\r\n];\r\n\r\nexport function AdminLayoutClient({ children }: { children: React.ReactNode }) {\r\n  const pathname = usePathname();\r\n  const router = useRouter();\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setMobileMenuOpen(false);\r\n  }, [pathname]);\r\n\r\n  if (pathname === '/admin/login') {\r\n    return <main className=\"min-h-screen bg-neutral-950 text-white font-sans\">{children}</main>;\r\n  }\r\n\r\n  const handleLogout = async () => {\r\n    await logout();\r\n    router.push('/admin/login');\r\n  };\r\n\r\n  const isActive = (item: typeof navItems[0]) =>\r\n    item.exact ? pathname === item.href : pathname.startsWith(item.href);\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-[#0a0c12] text-white font-sans overflow-hidden\">\r\n\r\n      {/* Mobile Overlay */}\r\n      {mobileMenuOpen && (\r\n        <div className=\"fixed inset-0 bg-black/70 z-40 lg:hidden backdrop-blur-sm\" onClick={() => setMobileMenuOpen(false)} />\r\n      )}\r\n\r\n      {/* Sidebar */}\r\n      <aside className={`fixed lg:static top-0 left-0 h-full w-64 bg-[#0d0f17] border-r border-white/5 flex flex-col shrink-0 z-50 transition-transform duration-300 ${mobileMenuOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'}`}>\r\n        {/* Logo */}\r\n        <div className=\"p-5 border-b border-white/5 flex items-center justify-between\">\r\n          <Link href=\"/admin\" className=\"flex items-center gap-3\">\r\n            <Image src=\"/logo.png\" alt=\"Toro Store\" width={80} height={40} className=\"object-contain\" />\r\n            <span className=\"text-xs font-bold text-neutral-500 uppercase tracking-widest\">Admin</span>\r\n          </Link>\r\n          <button className=\"lg:hidden text-neutral-500 hover:text-white\" onClick={() => setMobileMenuOpen(false)}>\r\n            <i className=\"fa-solid fa-xmark text-lg\"></i>\r\n          </button>\r\n        </div>\r\n\r\n        {/* Nav */}\r\n        <nav className=\"flex-1 p-3 flex flex-col gap-1 overflow-y-auto\">\r\n          {navItems.map(item => (\r\n            <Link\r\n              key={item.href}\r\n              href={item.href}\r\n              className={`px-4 py-3 rounded-xl transition-all flex items-center gap-3 text-sm font-medium ${isActive(item)\r\n                ? 'bg-blue-500/15 text-blue-400 border border-blue-500/20'\r\n                : 'hover:bg-white/5 text-neutral-400 hover:text-white'\r\n              }`}\r\n            >\r\n              <i className={`fa-solid ${item.icon} w-4 shrink-0`}></i>\r\n              {item.label}\r\n              {isActive(item) && <span className=\"ml-auto w-1.5 h-1.5 rounded-full bg-blue-400\"></span>}\r\n            </Link>\r\n          ))}\r\n        </nav>\r\n\r\n        {/* Footer */}\r\n        <div className=\"p-3 border-t border-white/5 space-y-2\">\r\n          <Link href=\"/\" className=\"flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm text-neutral-500 hover:text-neutral-300 hover:bg-white/5 transition-all\">\r\n            <i className=\"fa-solid fa-arrow-left w-4\"></i> Web Utama\r\n          </Link>\r\n          <button\r\n            onClick={handleLogout}\r\n            className=\"w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm text-red-400 hover:bg-red-500/10 hover:text-red-300 transition-all\"\r\n          >\r\n            <i className=\"fa-solid fa-arrow-right-from-bracket w-4\"></i> Logout\r\n          </button>\r\n        </div>\r\n      </aside>\r\n\r\n      {/* Main */}\r\n      <div className=\"flex-1 flex flex-col w-full overflow-hidden\">\r\n        {/* Mobile topbar */}\r\n        <header className=\"lg:hidden bg-[#0d0f17] border-b border-white/5 p-4 flex items-center gap-3 shrink-0\">\r\n          <button\r\n            onClick={() => setMobileMenuOpen(true)}\r\n            className=\"w-9 h-9 flex items-center justify-center rounded-lg bg-white/5 border border-white/10 text-white\"\r\n          >\r\n            <i className=\"fa-solid fa-bars text-sm\"></i>\r\n          </button>\r\n          <span className=\"font-bold\">Toro Store Admin</span>\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 sm:p-6 lg:p-8 bg-[#0a0c12]\">\r\n          <div className=\"max-w-7xl mx-auto\">\r\n            {children}\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n      {/* Global Toast Notifications */}\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={3000}\r\n        hideProgressBar={false}\r\n        newestOnTop\r\n        closeOnClick\r\n        pauseOnFocusLoss={false}\r\n        draggable\r\n        pauseOnHover\r\n        theme=\"dark\"\r\n        toastStyle={{ background: '#1a1d2a', border: '1px solid rgba(255,255,255,0.08)', borderRadius: '12px' }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}