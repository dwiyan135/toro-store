{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dwiya/.gemini/antigravity/scratch/toro-store-app/src/components/Navigation.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { usePathname } from 'next/navigation';\r\nimport Image from 'next/image';\r\n\r\nconst NAV_LINKS = [\r\n  { href: '/packages', label: 'Paket', icon: 'fa-layer-group' },\r\n  { href: '/order',    label: 'Order',  icon: 'fa-shopping-cart' },\r\n  { href: '/faq',      label: 'FAQ',    icon: 'fa-circle-question' },\r\n];\r\n\r\nexport function Navigation() {\r\n  const [scrolled, setScrolled]         = useState(false);\r\n  const [mobileMenuOpen, setMobileMenu] = useState(false);\r\n  const pathname = usePathname();\r\n\r\n  useEffect(() => {\r\n    const onScroll = () => setScrolled(window.scrollY > 20);\r\n    window.addEventListener('scroll', onScroll);\r\n    return () => window.removeEventListener('scroll', onScroll);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    document.body.style.overflow = mobileMenuOpen ? 'hidden' : '';\r\n  }, [mobileMenuOpen]);\r\n\r\n  useEffect(() => { setMobileMenu(false); }, [pathname]);\r\n\r\n  const isActive = (href: string) => pathname === href || pathname.startsWith(href + '/');\r\n\r\n  return (\r\n    <header className={`fixed top-0 left-0 w-full z-50 transition-all duration-300 ${\r\n      scrolled || mobileMenuOpen\r\n        ? 'bg-neutral-950/90 backdrop-blur-md border-b border-white/5 py-3 shadow-lg'\r\n        : 'bg-transparent py-5'\r\n    }`}>\r\n      <div className=\"container mx-auto px-4 flex justify-between items-center relative z-20\">\r\n        {/* Logo */}\r\n        <Link href=\"/\" className=\"flex items-center shrink-0\">\r\n          <Image src=\"/logo.png\" alt=\"Toro Store\" width={110} height={55} className=\"object-contain drop-shadow-lg\" priority />\r\n        </Link>\r\n\r\n        {/* Hamburger (mobile) */}\r\n        <button\r\n          className=\"md:hidden w-10 h-10 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors\"\r\n          onClick={() => setMobileMenu(v => !v)}\r\n          aria-label=\"Toggle Menu\"\r\n        >\r\n          <i className={`fa-solid ${mobileMenuOpen ? 'fa-xmark text-red-400' : 'fa-bars text-white'} text-xl transition-all`} />\r\n        </button>\r\n\r\n        {/* Desktop nav */}\r\n        <nav className=\"hidden md:flex items-center gap-1\">\r\n          {NAV_LINKS.map(link => (\r\n            <Link\r\n              key={link.href}\r\n              href={link.href}\r\n              className={`px-4 py-2 rounded-xl font-medium text-sm transition-all ${\r\n                isActive(link.href)\r\n                  ? 'bg-white/10 text-white'\r\n                  : 'text-neutral-400 hover:text-white hover:bg-white/5'\r\n              }`}\r\n            >\r\n              {link.label}\r\n            </Link>\r\n          ))}\r\n        </nav>\r\n\r\n        {/* Desktop CTA */}\r\n        <Link\r\n          href=\"/order\"\r\n          className=\"hidden md:inline-flex items-center gap-2 px-5 py-2.5 rounded-full bg-blue-500 hover:bg-blue-400 text-neutral-950 font-bold text-sm transition-all shadow-lg shadow-blue-500/20\"\r\n        >\r\n          <i className=\"fa-brands fa-whatsapp\" /> Order Sekarang\r\n        </Link>\r\n      </div>\r\n\r\n      {/* Mobile Drawer */}\r\n      <div className={`fixed inset-0 bg-neutral-950/98 z-10 md:hidden transition-transform duration-300 flex flex-col pt-24 px-6 pb-8 gap-4 ${mobileMenuOpen ? 'translate-y-0' : '-translate-y-full'}`}>\r\n        <div className=\"flex flex-col gap-1\">\r\n          {NAV_LINKS.map(link => (\r\n            <Link\r\n              key={link.href}\r\n              href={link.href}\r\n              className={`flex items-center gap-4 p-4 rounded-2xl text-lg font-semibold transition-all ${\r\n                isActive(link.href)\r\n                  ? 'bg-blue-500/10 text-blue-400 border border-blue-500/20'\r\n                  : 'text-neutral-300 hover:bg-white/5 border border-transparent'\r\n              }`}\r\n            >\r\n              <i className={`fa-solid ${link.icon} w-6 text-center text-neutral-500`} />\r\n              {link.label}\r\n            </Link>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"mt-auto\">\r\n          <Link\r\n            href=\"/order\"\r\n            className=\"w-full flex items-center justify-center gap-3 px-6 py-4 rounded-2xl bg-blue-500 hover:bg-blue-400 text-neutral-950 font-bold text-lg transition-all shadow-lg shadow-blue-500/20\"\r\n          >\r\n            <i className=\"fa-brands fa-whatsapp text-2xl\" /> Mulai Pemesanan\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOA,MAAM,YAAY;IAChB;QAAE,MAAM;QAAa,OAAO;QAAS,MAAM;IAAiB;IAC5D;QAAE,MAAM;QAAa,OAAO;QAAU,MAAM;IAAmB;IAC/D;QAAE,MAAM;QAAa,OAAO;QAAU,MAAM;IAAqB;CAClE;AAEM,SAAS;IACd,MAAM,CAAC,UAAU,YAAY,GAAW,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,gBAAgB,cAAc,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,WAAW,IAAA,iJAAW;IAE5B,IAAA,kNAAS,EAAC;QACR,MAAM,WAAW,IAAM,YAAY,OAAO,OAAO,GAAG;QACpD,OAAO,gBAAgB,CAAC,UAAU;QAClC,OAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;IACpD,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,iBAAiB,WAAW;IAC7D,GAAG;QAAC;KAAe;IAEnB,IAAA,kNAAS,EAAC;QAAQ,cAAc;IAAQ,GAAG;QAAC;KAAS;IAErD,MAAM,WAAW,CAAC,OAAiB,aAAa,QAAQ,SAAS,UAAU,CAAC,OAAO;IAEnF,qBACE,8OAAC;QAAO,WAAW,CAAC,2DAA2D,EAC7E,YAAY,iBACR,8EACA,uBACJ;;0BACA,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC,uKAAI;wBAAC,MAAK;wBAAI,WAAU;kCACvB,cAAA,8OAAC,wIAAK;4BAAC,KAAI;4BAAY,KAAI;4BAAa,OAAO;4BAAK,QAAQ;4BAAI,WAAU;4BAAgC,QAAQ;;;;;;;;;;;kCAIpH,8OAAC;wBACC,WAAU;wBACV,SAAS,IAAM,cAAc,CAAA,IAAK,CAAC;wBACnC,cAAW;kCAEX,cAAA,8OAAC;4BAAE,WAAW,CAAC,SAAS,EAAE,iBAAiB,0BAA0B,qBAAqB,uBAAuB,CAAC;;;;;;;;;;;kCAIpH,8OAAC;wBAAI,WAAU;kCACZ,UAAU,GAAG,CAAC,CAAA,qBACb,8OAAC,uKAAI;gCAEH,MAAM,KAAK,IAAI;gCACf,WAAW,CAAC,wDAAwD,EAClE,SAAS,KAAK,IAAI,IACd,2BACA,sDACJ;0CAED,KAAK,KAAK;+BARN,KAAK,IAAI;;;;;;;;;;kCAcpB,8OAAC,uKAAI;wBACH,MAAK;wBACL,WAAU;;0CAEV,8OAAC;gCAAE,WAAU;;;;;;4BAA0B;;;;;;;;;;;;;0BAK3C,8OAAC;gBAAI,WAAW,CAAC,qHAAqH,EAAE,iBAAiB,kBAAkB,qBAAqB;;kCAC9L,8OAAC;wBAAI,WAAU;kCACZ,UAAU,GAAG,CAAC,CAAA,qBACb,8OAAC,uKAAI;gCAEH,MAAM,KAAK,IAAI;gCACf,WAAW,CAAC,6EAA6E,EACvF,SAAS,KAAK,IAAI,IACd,2DACA,+DACJ;;kDAEF,8OAAC;wCAAE,WAAW,CAAC,SAAS,EAAE,KAAK,IAAI,CAAC,iCAAiC,CAAC;;;;;;oCACrE,KAAK,KAAK;;+BATN,KAAK,IAAI;;;;;;;;;;kCAcpB,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,uKAAI;4BACH,MAAK;4BACL,WAAU;;8CAEV,8OAAC;oCAAE,WAAU;;;;;;gCAAmC;;;;;;;;;;;;;;;;;;;;;;;;AAM5D"}},
    {"offset": {"line": 232, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dwiya/.gemini/antigravity/scratch/toro-store-app/src/actions/order.ts"],"sourcesContent":["'use server';\r\n\r\nimport { prisma } from '@/lib/prisma';\r\nimport { revalidatePath } from 'next/cache';\r\n\r\nexport async function createOrder(data: {\r\n  packageId: string;\r\n  itemName: string;\r\n  mlbbId: string;\r\n  serverId: string;\r\n  nickname: string;\r\n  note?: string;\r\n  waNumber: string;\r\n}) {\r\n  try {\r\n    // 1. Verify package exists and has stock\r\n    const pkg = await prisma.package.findUnique({ where: { id: data.packageId } });\r\n    if (!pkg) return { success: false, error: 'Paket tidak ditemukan.' };\r\n    if (!pkg.isActive) return { success: false, error: 'Paket tidak aktif.' };\r\n    if (pkg.stock <= 0) return { success: false, error: 'Stok habis.' };\r\n\r\n    // 2. Generate unique order code (TS-YYYY-RND4)\r\n    const year = new Date().getFullYear();\r\n    const rnd = Math.floor(1000 + Math.random() * 9000);\r\n    const orderCode = `TS-${year}-${rnd}`;\r\n\r\n    // 3. Save order to database\r\n    const order = await prisma.order.create({\r\n      data: {\r\n        orderCode,\r\n        packageId: data.packageId,\r\n        itemName: data.itemName,\r\n        mlbbId: data.mlbbId,\r\n        serverId: data.serverId,\r\n        nickname: data.nickname,\r\n        note: data.note,\r\n        waNumber: data.waNumber,\r\n        status: 'NEW',\r\n        events: {\r\n          create: {\r\n            eventType: 'ORDER_CREATED',\r\n            message: 'Order placed by user',\r\n          },\r\n        },\r\n      },\r\n    });\r\n\r\n    return { success: true, orderCode: order.orderCode, packageName: pkg.name };\r\n  } catch (error) {\r\n    console.error('Failed to create order:', error);\r\n    return { success: false, error: 'Terjadi kesalahan sistem.' };\r\n  }\r\n}\r\n\r\nexport async function getAdminOrders() {\r\n  try {\r\n    const orders = await prisma.order.findMany({\r\n      orderBy: { createdAt: 'desc' },\r\n      take: 100,\r\n      include: { package: { select: { name: true, category: true } } },\r\n    });\r\n    return orders;\r\n  } catch (error) {\r\n    console.error('Failed to fetch admin orders:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function updateOrderStatus(\r\n  orderId: string,\r\n  newStatus: 'NEW' | 'CONFIRMED' | 'DONE' | 'CANCELED'\r\n) {\r\n  try {\r\n    await prisma.order.update({\r\n      where: { id: orderId },\r\n      data: { status: newStatus },\r\n    });\r\n    await prisma.orderEvent.create({\r\n      data: {\r\n        orderId,\r\n        eventType: 'STATUS_UPDATED',\r\n        message: `Status diubah menjadi ${newStatus}`,\r\n      },\r\n    });\r\n    revalidatePath('/admin');\r\n    revalidatePath('/admin/orders');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to update status:', error);\r\n    return { success: false, error: 'Gagal mengupdate status' };\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAKsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,+CAAA"}},
    {"offset": {"line": 246, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dwiya/.gemini/antigravity/scratch/toro-store-app/src/actions/package.ts"],"sourcesContent":["'use server';\r\n\r\nimport { prisma } from '@/lib/prisma';\r\nimport { revalidatePath } from 'next/cache';\r\nimport { writeFile, mkdir } from 'fs/promises';\r\nimport { existsSync } from 'fs';\r\nimport path from 'path';\r\nimport sharp from 'sharp';\r\n\r\nfunction getPublicDir(): string {\r\n  const subDirCandidate = path.join(process.cwd(), 'toro-store-app', 'public');\r\n  if (existsSync(subDirCandidate)) return subDirCandidate;\r\n  return path.join(process.cwd(), 'public');\r\n}\r\n\r\nexport async function getPackages() {\r\n  try {\r\n    return await prisma.package.findMany({\r\n      where: { isActive: true },\r\n      orderBy: [{ sortOrder: 'asc' }, { createdAt: 'asc' }],\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch packages:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getAdminPackages() {\r\n  try {\r\n    return await prisma.package.findMany({\r\n      orderBy: [{ sortOrder: 'asc' }, { createdAt: 'asc' }],\r\n      include: { _count: { select: { orders: true } } },\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch admin packages:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getPackageById(id: string) {\r\n  try {\r\n    return await prisma.package.findUnique({ where: { id } });\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function createPackage(data: {\r\n  name: string;\r\n  description?: string;\r\n  price: string;\r\n  category: string;\r\n  imageUrl?: string;\r\n  stock: number;\r\n  isActive: boolean;\r\n  sortOrder: number;\r\n}) {\r\n  try {\r\n    await prisma.package.create({ data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to create package:', error);\r\n    return { success: false, error: 'Gagal membuat paket.' };\r\n  }\r\n}\r\n\r\nexport async function updatePackage(\r\n  id: string,\r\n  data: {\r\n    name?: string;\r\n    description?: string;\r\n    price?: string;\r\n    category?: string;\r\n    imageUrl?: string;\r\n    stock?: number;\r\n    isActive?: boolean;\r\n    sortOrder?: number;\r\n  }\r\n) {\r\n  try {\r\n    await prisma.package.update({ where: { id }, data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to update package:', error);\r\n    return { success: false, error: 'Gagal mengupdate paket.' };\r\n  }\r\n}\r\n\r\nexport async function deletePackage(id: string) {\r\n  try {\r\n    // Delete order events first, then orders, then package (cascade)\r\n    const orders = await prisma.order.findMany({ where: { packageId: id }, select: { id: true } });\r\n    const orderIds = orders.map(o => o.id);\r\n    if (orderIds.length > 0) {\r\n      await prisma.orderEvent.deleteMany({ where: { orderId: { in: orderIds } } });\r\n      await prisma.order.deleteMany({ where: { id: { in: orderIds } } });\r\n    }\r\n    await prisma.package.delete({ where: { id } });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    revalidatePath('/admin');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Failed to delete package:', error);\r\n    return { success: false, error: 'Gagal menghapus paket.' };\r\n  }\r\n}\r\n\r\nexport async function bulkDeletePackages(ids: string[]) {\r\n  try {\r\n    const orders = await prisma.order.findMany({ where: { packageId: { in: ids } }, select: { id: true } });\r\n    const orderIds = orders.map(o => o.id);\r\n    if (orderIds.length > 0) {\r\n      await prisma.orderEvent.deleteMany({ where: { orderId: { in: orderIds } } });\r\n      await prisma.order.deleteMany({ where: { id: { in: orderIds } } });\r\n    }\r\n    await prisma.package.deleteMany({ where: { id: { in: ids } } });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    revalidatePath('/admin');\r\n    return { success: true, count: ids.length };\r\n  } catch (error) {\r\n    console.error('Failed to bulk delete:', error);\r\n    return { success: false, error: 'Gagal menghapus paket.' };\r\n  }\r\n}\r\n\r\nexport async function bulkUpdatePackages(ids: string[], data: { isActive?: boolean }) {\r\n  try {\r\n    await prisma.package.updateMany({ where: { id: { in: ids } }, data });\r\n    revalidatePath('/');\r\n    revalidatePath('/admin/packages');\r\n    return { success: true, count: ids.length };\r\n  } catch (error) {\r\n    console.error('Failed to bulk update:', error);\r\n    return { success: false, error: 'Gagal mengupdate paket.' };\r\n  }\r\n}\r\n\r\nexport async function uploadPackageImage(formData: FormData): Promise<{ success: boolean; url?: string; error?: string }> {\r\n  try {\r\n    const file = formData.get('file') as File;\r\n    if (!file || file.size === 0) return { success: false, error: 'File tidak ditemukan.' };\r\n\r\n    const allowed = ['image/jpeg', 'image/png', 'image/webp', 'image/gif', 'image/avif'];\r\n    if (!allowed.includes(file.type)) return { success: false, error: 'Format tidak didukung. Gunakan JPG, PNG, atau WebP.' };\r\n\r\n    if (file.size > 10 * 1024 * 1024) return { success: false, error: 'Ukuran file maksimal 10MB.' };\r\n\r\n    const inputBuffer = Buffer.from(await file.arrayBuffer());\r\n    const webpBuffer = await sharp(inputBuffer)\r\n      .resize(1200, 900, { fit: 'inside', withoutEnlargement: true })\r\n      .webp({ quality: 82 })\r\n      .toBuffer();\r\n\r\n    const filename = `pkg_${Date.now()}.webp`;\r\n    const uploadDir = path.join(getPublicDir(), 'uploads');\r\n    await mkdir(uploadDir, { recursive: true });\r\n    await writeFile(path.join(uploadDir, filename), webpBuffer);\r\n\r\n    return { success: true, url: `/uploads/${filename}` };\r\n  } catch (error) {\r\n    console.error('Upload failed:', error);\r\n    return { success: false, error: 'Upload gagal.' };\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAesB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,+CAAA"}},
    {"offset": {"line": 260, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dwiya/.gemini/antigravity/scratch/toro-store-app/src/components/CheckoutForm.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, Suspense } from 'react';\r\nimport { createOrder } from '@/actions/order';\r\nimport { getPackages } from '@/actions/package';\r\nimport Image from 'next/image';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport PhoneInput from 'react-phone-input-2';\r\nimport 'react-phone-input-2/lib/style.css';\r\n\r\ntype Package = {\r\n  id: string;\r\n  name: string;\r\n  description: string | null;\r\n  price: string;\r\n  category: string;\r\n  imageUrl: string | null;\r\n  stock: number;\r\n};\r\n\r\nexport function CheckoutForm() {\r\n  return (\r\n    <Suspense fallback={<div className=\"h-96 flex items-center justify-center\"><div className=\"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full\" /></div>}>\r\n      <CheckoutFormContent />\r\n    </Suspense>\r\n  );\r\n}\r\n\r\nfunction CheckoutFormContent() {\r\n  const searchParams = useSearchParams();\r\n  const defaultPkgId = searchParams.get('pkg');\r\n\r\n  const [packages, setPackages] = useState<Package[]>([]);\r\n  const [loadingPkgs, setLoadingPkgs] = useState(true);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const [selectedPackage, setSelectedPackage] = useState<Package | null>(null);\r\n  const [itemName, setItemName] = useState('');\r\n  const [mlbbId, setMlbbId] = useState('');\r\n  const [serverId, setServerId] = useState('');\r\n  const [nickname, setNickname] = useState('');\r\n  const [note, setNote] = useState('');\r\n  const [waNumber, setWaNumber] = useState('');\r\n\r\n  useEffect(() => {\r\n    getPackages().then(data => {\r\n      const pkgs = data as Package[];\r\n      setPackages(pkgs);\r\n      setLoadingPkgs(false);\r\n      if (defaultPkgId) {\r\n        const found = pkgs.find(p => p.id === defaultPkgId);\r\n        if (found && found.stock > 0) setSelectedPackage(found);\r\n      }\r\n    });\r\n  }, [defaultPkgId]);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!selectedPackage || !itemName || !mlbbId || !serverId || !nickname || !waNumber) {\r\n      setError('Harap isi semua field wajib (*)');\r\n      return;\r\n    }\r\n    \r\n    // Validasi nomor WhatsApp minimal 10 digit (kode negara + nomor)\r\n    if (waNumber.replace(/[^0-9]/g, '').length < 10) {\r\n       setError('Nomor WhatsApp kurang valid. Pastikan nomor benar.');\r\n       return;\r\n    }\r\n\r\n    if (selectedPackage.stock <= 0) {\r\n      setError('Paket yang dipilih sedang habis stok.');\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    const res = await createOrder({\r\n      packageId: selectedPackage.id,\r\n      itemName,\r\n      mlbbId,\r\n      serverId,\r\n      nickname,\r\n      note,\r\n      waNumber,\r\n    });\r\n\r\n    if (res.success && res.orderCode) {\r\n      const adminWa = process.env.NEXT_PUBLIC_ADMIN_WA || '6281234567890';\r\n      const msg = `Halo Toro Store, saya mau order gift skin MLBB.\\nOrder: ${res.orderCode}\\nPaket: ${res.packageName}\\nNama Skin/Event: ${itemName}\\nID: ${mlbbId}\\nServer: ${serverId}\\nNickname: ${nickname || '-'}\\nCatatan: ${note || '-'}\\nTerima kasih.`;\r\n      const url = `https://wa.me/${adminWa}?text=${encodeURIComponent(msg)}`;\r\n      window.open(url, '_blank');\r\n      window.location.href = '/order-success';\r\n    } else {\r\n      setError(res.error || 'Terjadi kesalahan sistem');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const isOutOfStock = selectedPackage && selectedPackage.stock <= 0;\r\n\r\n  return (\r\n    <div className=\"bg-neutral-900/60 border border-neutral-800 rounded-2xl p-6 md:p-8 shadow-2xl backdrop-blur-sm relative overflow-hidden\">\r\n      <div className=\"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 rounded-full blur-3xl -mr-32 -mt-32 pointer-events-none\"></div>\r\n\r\n      <h3 className=\"text-2xl font-bold mb-6\">Form Pemesanan</h3>\r\n\r\n      {error && (\r\n        <div className=\"bg-red-500/10 border border-red-500/20 text-red-400 p-4 rounded-xl mb-6 text-sm flex items-center gap-2\">\r\n          <i className=\"fa-solid fa-circle-exclamation\"></i> {error}\r\n        </div>\r\n      )}\r\n\r\n      <form onSubmit={handleSubmit} className=\"space-y-6 relative z-10\">\r\n        {/* Step 1 — Package Selection */}\r\n        <div className=\"space-y-3\">\r\n          <h4 className=\"text-sm font-bold text-blue-400 uppercase tracking-wider flex items-center gap-2\">\r\n            <span className=\"w-5 h-5 rounded-full bg-blue-500/20 text-blue-400 text-xs flex items-center justify-center\">1</span>\r\n            Pilih Paket\r\n          </h4>\r\n\r\n          {loadingPkgs ? (\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\r\n              {[1, 2, 3].map(i => (\r\n                <div key={i} className=\"h-24 bg-neutral-800 rounded-xl animate-pulse\"></div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\r\n              {packages.map(pkg => (\r\n                <button\r\n                  key={pkg.id}\r\n                  type=\"button\"\r\n                  onClick={() => setSelectedPackage(pkg.id === selectedPackage?.id ? null : pkg)}\r\n                  disabled={pkg.stock <= 0}\r\n                  className={`relative text-left p-4 rounded-xl border transition-all group overflow-hidden ${\r\n                    selectedPackage?.id === pkg.id\r\n                      ? 'border-blue-500 bg-blue-500/10'\r\n                      : pkg.stock <= 0\r\n                      ? 'border-neutral-800 bg-neutral-900/50 opacity-50 cursor-not-allowed'\r\n                      : 'border-neutral-700 bg-neutral-900/50 hover:border-neutral-500'\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-center gap-3\">\r\n                    {pkg.imageUrl && (\r\n                      <div className=\"relative w-12 h-12 rounded-lg overflow-hidden shrink-0 bg-neutral-800\">\r\n                        <Image src={pkg.imageUrl} alt={pkg.name} fill className=\"object-cover\" />\r\n                      </div>\r\n                    )}\r\n                    <div className=\"min-w-0\">\r\n                      <div className=\"flex items-center gap-2 flex-wrap\">\r\n                        <span className=\"font-bold text-sm truncate\">{pkg.name}</span>\r\n                        <span className=\"text-xs px-1.5 py-0.5 rounded bg-neutral-800 text-neutral-400\">{pkg.category}</span>\r\n                      </div>\r\n                      <div className=\"text-amber-400 font-bold text-sm mt-0.5\">{pkg.price}</div>\r\n                    </div>\r\n                  </div>\r\n                  <div className={`mt-2 text-xs font-medium ${pkg.stock === 0 ? 'text-red-400' : pkg.stock <= 5 ? 'text-amber-400' : 'text-emerald-400'}`}>\r\n                    <i className=\"fa-solid fa-circle text-[6px] mr-1 align-middle\"></i>\r\n                    {pkg.stock === 0 ? 'Habis' : pkg.stock <= 5 ? `Sisa ${pkg.stock} slot` : `${pkg.stock} slot tersedia`}\r\n                  </div>\r\n                  {selectedPackage?.id === pkg.id && (\r\n                    <div className=\"absolute top-3 right-3 w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center\">\r\n                      <i className=\"fa-solid fa-check text-white text-[10px]\"></i>\r\n                    </div>\r\n                  )}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Step 2 — Skin Name */}\r\n        <div className=\"space-y-3\">\r\n          <h4 className=\"text-sm font-bold text-blue-400 uppercase tracking-wider flex items-center gap-2\">\r\n            <span className=\"w-5 h-5 rounded-full bg-blue-500/20 text-blue-400 text-xs flex items-center justify-center\">2</span>\r\n            Nama Skin / Event *\r\n          </h4>\r\n          <input\r\n            type=\"text\"\r\n            value={itemName}\r\n            onChange={e => setItemName(e.target.value)}\r\n            placeholder=\"Ketik Nama Skin / Event...\"\r\n            className=\"w-full bg-neutral-950/60 border border-neutral-700 rounded-xl p-3.5 text-white placeholder-neutral-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all outline-none\"\r\n          />\r\n        </div>\r\n\r\n        {/* Step 3 — Account Data */}\r\n        <div className=\"space-y-3\">\r\n          <h4 className=\"text-sm font-bold text-blue-400 uppercase tracking-wider flex items-center gap-2\">\r\n            <span className=\"w-5 h-5 rounded-full bg-blue-500/20 text-blue-400 text-xs flex items-center justify-center\">3</span>\r\n            Data Akun MLBB\r\n          </h4>\r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            <div className=\"space-y-1.5\">\r\n              <label className=\"text-xs font-medium text-neutral-400\">User ID *</label>\r\n              <input type=\"number\" value={mlbbId} onChange={e => setMlbbId(e.target.value)} placeholder=\"Masukkan User ID...\"\r\n                className=\"w-full bg-neutral-950/60 border border-neutral-700 rounded-xl p-3.5 text-white placeholder-neutral-500 focus:border-blue-500 transition-all outline-none font-mono text-sm\" />\r\n            </div>\r\n            <div className=\"space-y-1.5\">\r\n              <label className=\"text-xs font-medium text-neutral-400\">Zone ID *</label>\r\n              <input type=\"number\" value={serverId} onChange={e => setServerId(e.target.value)} placeholder=\"Masukkan Zone ID...\"\r\n                className=\"w-full bg-neutral-950/60 border border-neutral-700 rounded-xl p-3.5 text-white placeholder-neutral-500 focus:border-blue-500 transition-all outline-none font-mono text-sm\" />\r\n            </div>\r\n          </div>\r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            <div className=\"space-y-1.5\">\r\n              <label className=\"text-xs font-medium text-neutral-400\">Nickname MLBB *</label>\r\n              <input type=\"text\" value={nickname} onChange={e => setNickname(e.target.value)} placeholder=\"Ketik Nickname MLBB...\"\r\n                className=\"w-full bg-neutral-950/60 border border-neutral-700 rounded-xl p-3.5 text-white placeholder-neutral-500 focus:border-blue-500 transition-all outline-none text-sm\" />\r\n            </div>\r\n            <div className=\"space-y-1.5 checkout-phone-wrapper flex flex-col\">\r\n              <label className=\"text-xs font-medium text-neutral-400\">No. WhatsApp *</label>\r\n              <div className=\"relative w-full\">\r\n                <PhoneInput\r\n                  country={'id'}\r\n                  value={waNumber}\r\n                  onChange={phone => setWaNumber(phone)}\r\n                  inputClass=\"!w-full !bg-neutral-950/60 !border-neutral-700 !rounded-xl !text-white !h-auto !py-3.5 !pl-14 hover:!border-neutral-500 focus:!border-blue-500 !transition-all\"\r\n                  buttonClass=\"!bg-transparent !border-r !border-r-neutral-700 !border-y-0 !border-l-0 !rounded-l-xl !pl-2 hover:!bg-white/5 !transition-all\"\r\n                  dropdownClass=\"!bg-neutral-900 !border-neutral-700 !text-sm !text-neutral-300\"\r\n                  searchClass=\"!bg-neutral-950 !border-neutral-700 !text-white\"\r\n                  containerClass=\"w-full flex\"\r\n                  enableSearch={true}\r\n                  disableSearchIcon={true}\r\n                  searchPlaceholder=\"Cari negara...\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Note */}\r\n        <div className=\"space-y-1.5\">\r\n          <label className=\"text-xs font-medium text-neutral-400\">Catatan <span className=\"text-neutral-600\">(opsional)</span></label>\r\n          <textarea value={note} onChange={e => setNote(e.target.value)} placeholder=\"Pesan khusus untuk admin...\" rows={3}\r\n            className=\"w-full bg-neutral-950/60 border border-neutral-700 rounded-xl p-3.5 text-white placeholder-neutral-600 focus:border-blue-500 transition-all outline-none resize-none text-sm\" />\r\n        </div>\r\n\r\n        {/* Summary */}\r\n        {selectedPackage && (\r\n          <div className=\"bg-blue-500/5 border border-blue-500/20 rounded-xl p-4 text-sm\">\r\n            <div className=\"flex justify-between items-center\">\r\n              <span className=\"text-neutral-400\">Paket dipilih:</span>\r\n              <span className=\"font-bold\">{selectedPackage.name}</span>\r\n            </div>\r\n            <div className=\"flex justify-between items-center mt-1\">\r\n              <span className=\"text-neutral-400\">Harga:</span>\r\n              <span className=\"font-bold text-amber-400\">{selectedPackage.price}</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {isOutOfStock ? (\r\n          <div className=\"bg-amber-500/10 border border-amber-500/20 text-amber-400 p-4 rounded-xl text-sm text-center\">\r\n            <i className=\"fa-solid fa-triangle-exclamation mr-2\"></i>Paket habis — hubungi admin untuk Pre-Order.\r\n            <a href={`https://wa.me/${process.env.NEXT_PUBLIC_ADMIN_WA || '6281234567890'}?text=Halo admin, saya mau PO paket ${selectedPackage.name}`} target=\"_blank\" rel=\"noreferrer\"\r\n              className=\"block mt-2 bg-amber-500 hover:bg-amber-400 text-neutral-950 font-bold px-4 py-2 rounded-lg transition\">\r\n              Pre-Order via WhatsApp →\r\n            </a>\r\n          </div>\r\n        ) : (\r\n          <button type=\"submit\" disabled={loading}\r\n            className=\"w-full bg-blue-500 hover:bg-blue-400 disabled:opacity-50 text-neutral-950 font-bold py-4 px-6 rounded-xl transition-all shadow-lg shadow-blue-500/20 flex justify-center items-center gap-2 group\">\r\n            {loading ? <span className=\"animate-pulse\">Memproses...</span> : (\r\n              <><i className=\"fa-brands fa-whatsapp text-xl\"></i>Kirim Order ke WhatsApp<i className=\"fa-solid fa-arrow-right ml-1 group-hover:translate-x-1 transition-transform\"></i></>\r\n            )}\r\n          </button>\r\n        )}\r\n\r\n        <p className=\"text-xs text-center text-neutral-600\">Dengan klik tombol di atas, Anda setuju dengan syarat Toro Store.</p>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}